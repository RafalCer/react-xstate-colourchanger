{"code":"(this[\"webpackJsonpxstate-react-typescript-template\"]=this[\"webpackJsonpxstate-react-typescript-template\"]||[]).push([[0],{24:function(e,t,n){},35:function(e,t,n){\"use strict\";n.r(t);var a=n(23),o=n(11),r=(n(24),n(7),n(20)),i=n(41),s=n(4),c=n(40),l=n(39);function m(e){return Object(s.k)((t=>({type:\"SPEAK\",value:e})))}function p(){return Object(s.k)(\"LISTEN\")}const d={John:{person:\"John Appleseed\"},\"John Appleseed\":{person:\"John Appleseed\"},Jack:{person:\"Jack Jackson\"},\"Jack Jackson\":{person:\"Jack Jackson\"},Liana:{person:\"Liana Jelena\"},\"Liana Jelena\":{person:\"Liana Jelena\"},Natalie:{person:\"Natalie Portman\"},\"Natalie Portman\":{person:\"Natalie Portman\"},Bruce:{person:\"Bruce W\"},Bob:{person:\"Bob the builder\"},\"Bob the builder\":{person:\"Bob the builder\"},Shrek:{person:\"Shrek from the swamp\"},\"Shrek from the swap\":{person:\"Shrek\"},\"on Monday\":{day:\"Monday\"},Monday:{day:\"Monday\"},\"on Tuesday\":{day:\"Tuesday\"},Tuesday:{day:\"Tuesday\"},\"on Wednesday\":{day:\"Wednesday\"},Wednesday:{day:\"Wednesday\"},\"on Thursday\":{day:\"Thursday\"},Thursday:{day:\"Thursday\"},\"on Friday\":{day:\"Friday\"},Friday:{day:\"Friday\"},\"on Satudary\":{day:\"Satuday\"},Satudary:{day:\"Satuday\"},\"on Sunday\":{day:\"Sunday\"},Sunday:{day:\"Sunday\"},10:{time:\"10:00\"},\"at 10\":{time:\"10:00\"},ten:{time:\"10:00\"},\"at ten\":{time:\"10:00\"},11:{time:\"11:00\"},eleven:{time:\"11:00\"},\"at 11\":{time:\"11:00\"},\"at eleven\":{time:\"11:00\"},12:{time:\"12:00\"},twelve:{time:\"12:00\"},\"at 12\":{time:\"12:00\"},\"at twelve\":{time:\"12:00\"},13:{time:\"13:00\"},thirteen:{time:\"13:00\"},\"at 13\":{time:\"13:00\"},\"at thirteen\":{time:\"13:00\"},14:{time:\"14:00\"},fourteen:{time:\"14:00\"},\"at 14\":{time:\"14:00\"},\"at fourteen\":{time:\"14:00\"},15:{time:\"15:00\"},fifteen:{time:\"15:00\"},\"at 15\":{time:\"15:00\"},\"at fifteen\":{time:\"15:00\"},16:{time:\"16:00\"},sixteen:{time:\"16:00\"},\"at 16\":{time:\"16:00\"},\"at sixteen\":{time:\"16:00\"},17:{time:\"17:00\"},seventeen:{time:\"17:00\"},\"at 17\":{time:\"17:00\"},\"at seventeen\":{time:\"17:00\"},18:{time:\"18:00\"},eighteen:{time:\"18:00\"},\"at 18\":{time:\"18:00\"},\"at eighteen\":{time:\"18:00\"},19:{time:\"19:00\"},nineteen:{time:\"19:00\"},\"at 19\":{time:\"19:00\"},\"at nineteen\":{time:\"19:00\"},20:{time:\"20:00\"},twenty:{time:\"20:00\"},\"at 20\":{time:\"20:00\"},\"at twenty\":{time:\"20:00\"}},y={yes:{agreement:Boolean(!0)},\"of course\":{agreement:Boolean(!0)},sure:{agreement:Boolean(!0)},absolutely:{agreement:Boolean(!0)},\"yes please\":{agreement:Boolean(!0)},no:{disagreement:Boolean(!1)},\"no way\":{disagreement:Boolean(!1)},\"absolutely not\":{disagreement:Boolean(!1)},never:{disagreement:Boolean(!1)},maybe:{uncertain:\"unsure\"},perhaps:{uncertain:\"unsure\"},\"I don't know\":{uncertain:\"unsure\"},probably:{uncertain:\"unsure\"}},u={initial:\"start_point\",states:{start_point:{on:{CLICK:\"choice_of_tool\"}},choice_of_tool:{id:\"make_a_choice\",initial:\"prompt\",on:{RECOGNISED:[{actions:Object(s.b)((e=>({task:e.recResult}))),target:\"choice\"},{target:\".nomatch\"}]},states:{prompt:{entry:m(\"What would you like to do?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:p()},nomatch:{entry:m(\"Sorry, I didn't quite get you. Could you please repeat?\"),on:{ENDSPEECH:\"ask\"}}}},choice:{invoke:{id:\"rasaApi\",src:(e,t)=>{return n=e.task,fetch(new Request(\"https://cors-anywhere.herokuapp.com/https://rafalappointment.herokuapp.com/model/parse\",{method:\"POST\",headers:{Origin:\"http://maraev.me\"},body:'{\"text\": \"'.concat(n,'\"}')})).then((e=>e.json()));var n},onDone:{target:\"tool\",actions:[Object(s.b)(((e,t)=>({intentResult:t.data.intent.name}))),(e,t)=>console.log(t.data)]},onError:{target:\"choice_of_tool\",actions:(e,t)=>console.log(t.data)}}},tool:{initial:\"prompt\",on:{ENDSPEECH:[{cond:e=>\"to_do_item\"===e.intentResult,target:\"to_do_item\"},{cond:e=>\"appointment\"===e.intentResult,target:\"appointment\"},{cond:e=>\"timer\"===e.intentResult,target:\"timer\"},{target:\".nomatch\"}]},states:{prompt:{entry:Object(s.k)((e=>({type:\"SPEAK\",value:\"Ok, let's see if I can help you with \".concat(e.task,\".\")})))},nomatch:{entry:m(\"Excuse me, I haven't yet learned such task. Let's try again.\"),on:{ENDSPEECH:\"#make_a_choice\"}}}},timer:{initial:\"prompt\",on:{ENDSPEECH:\"choice_of_tool\"},states:{prompt:{entry:m(\"Welcome to the timer tool! Sorry, this tool has not yet been developed.\")}}},to_do_item:{initial:\"prompt\",on:{ENDSPEECH:\"choice_of_tool\"},states:{prompt:{entry:m(\"Welcome to the to do item tool! Sorry, this tool has not yet been developed.\")}}},appointment:{initial:\"prompt\",on:{ENDSPEECH:\"who\"},states:{prompt:{entry:m(\"Welcome to the appointment tool! Let's create an appointment.\")}}},who:{initial:\"prompt\",on:{RECOGNISED:[{cond:e=>\"person\"in(d[e.recResult]||{}),actions:Object(s.b)((e=>({person:d[e.recResult].person}))),target:\"day\"},{target:\".nomatch\"}]},states:{prompt:{entry:m(\"Who are you meeting with?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:p()},nomatch:{entry:Object(s.k)((e=>({type:\"SPEAK\",value:\"Sorry, I don't know them. Please choose someone from your contacts list.\"}))),on:{ENDSPEECH:\"ask\"}}}},day:{initial:\"prompt\",on:{RECOGNISED:[{cond:e=>\"day\"in(d[e.recResult]||{}),actions:Object(s.b)((e=>({day:d[e.recResult].day}))),target:\"length\"},{target:\".nomatch\"}]},states:{prompt:{entry:Object(s.k)((e=>({type:\"SPEAK\",value:\"OK. \".concat(e.person,\". On which day is your meeting?\")}))),on:{ENDSPEECH:\"ask\"}},ask:{entry:p()},nomatch:{entry:m(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},length:{initial:\"prompt\",on:{RECOGNISED:[{cond:e=>\"agreement\"in(y[e.recResult]||{}),target:\"whole_day\"},{cond:e=>\"disagreement\"in(y[e.recResult]||{}),target:\"time\"},{cond:e=>\"uncertain\"in(y[e.recResult]||{}),target:\".specific\"},{target:\".nomatch\"}]},states:{prompt:{entry:m(\"Will it take the whole day?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:p()},nomatch:{entry:m(\"Sorry, I did not understand you this time.\"),on:{ENDSPEECH:\"ask\"}},specific:{entry:m(\"please be more specific.\"),on:{ENDSPEECH:\"ask\"}}}},time:{initial:\"prompt\",on:{RECOGNISED:[{cond:e=>\"time\"in(d[e.recResult]||{}),actions:Object(s.b)((e=>({time:d[e.recResult].time}))),target:\"repetition\"},{target:\".nomatch\"}]},states:{prompt:{entry:m(\"What time is your meeting?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:p()},nomatch:{entry:m(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},whole_day:{initial:\"prompt\",on:{RECOGNISED:[{cond:e=>\"agreement\"in(y[e.recResult]||{}),target:\"confirmation\"},{cond:e=>\"disagreement\"in(y[e.recResult]||{}),target:\".canceled\"},{target:\".nomatch\"}]},states:{prompt:{entry:Object(s.k)((e=>({type:\"SPEAK\",value:\"Do you want me to create an appointment with \".concat(e.person,\" on \").concat(e.day,\" for the whole day?\")}))),on:{ENDSPEECH:\"ask\"}},ask:{entry:p()},canceled:{entry:m(\"The appointment has been canceled.\"),on:{ENDSPEECH:\"#make_a_choice\"}},nomatch:{entry:m(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},repetition:{initial:\"prompt\",on:{RECOGNISED:[{cond:e=>\"agreement\"in(y[e.recResult]||{}),target:\"confirmation\"},{cond:e=>\"disagreement\"in(y[e.recResult]||{}),target:\".canceled\"},{cond:e=>\"unsure\"in(y[e.recResult]||{}),target:\".specific\"},{target:\".nomatch\"}]},states:{prompt:{entry:Object(s.k)((e=>({type:\"SPEAK\",value:\"Do you want me to create an appointment with \".concat(e.person,\" on \").concat(e.day,\" at \").concat(e.time,\"?\")}))),on:{ENDSPEECH:\"ask\"}},canceled:{entry:m(\"The appointment has been cancelled.\"),on:{ENDSPEECH:\"#make_a_choice\"}},ask:{entry:p()},specific:{entry:m(\"Please be more specific.\"),on:{ENDSPEECH:\"ask\"}},nomatch:{entry:m(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},confirmation:{initial:\"prompt\",on:{RECOGNISED:[{cond:e=>\"agreement\"in(y[e.recResult]||{}),target:\"to_do_item\"},{cond:e=>\"disagreement\"in(y[e.recResult]||{}),target:\"#make_a_choice\"},{cond:e=>\"unsure\"in(y[e.recResult]||{}),target:\".specific\"},{target:\".nomatch\"}]},states:{prompt:{entry:m(\"Your appointment has been created! Would you like to add it to your to do list? \"),on:{ENDSPEECH:\"ask\"}},ask:{entry:p()},nomatch:{entry:m(\"Sorry, I did not get you.\")},specific:{entry:m(\"Please be more specific\"),on:{ENDSPEECH:\"ask\"}}}}}};var h=n(19),E=n(12);Object(l.a)({url:\"https://statecharts.io/inspect\",iframe:!1});const g=Object(i.a)({id:\"root\",type:\"parallel\",states:{dm:Object(o.a)({},u),asrtts:{initial:\"idle\",states:{idle:{on:{LISTEN:\"recognising\",SPEAK:{target:\"speaking\",actions:Object(s.b)(((e,t)=>({ttsAgenda:t.value})))}}},recognising:{initial:\"progress\",entry:\"recStart\",exit:\"recStop\",on:{ASRRESULT:{actions:[\"recLogResult\",Object(s.b)(((e,t)=>({recResult:t.value})))],target:\".match\"},RECOGNISED:\"idle\"},states:{progress:{},match:{entry:Object(s.k)(\"RECOGNISED\")}}},speaking:{entry:\"ttsStart\",on:{ENDSPEECH:\"idle\"}}}}}},{actions:{recLogResult:e=>{console.log(\"<< ASR: \"+e.recResult)},test:()=>{console.log(\"test\")},logIntent:e=>{console.log(\"<< NLU intent: \"+e.nluData.intent.name)}}}),S=e=>{switch(!0){case e.state.matches({asrtts:\"recognising\"}):return Object(E.jsx)(\"button\",Object(o.a)(Object(o.a)({type:\"button\",className:\"glow-on-hover\",style:{animation:\"glowing 20s linear\"}},e),{},{children:\"Listening...\"}));case e.state.matches({asrtts:\"speaking\"}):return Object(E.jsx)(\"button\",Object(o.a)(Object(o.a)({type:\"button\",className:\"glow-on-hover\",style:{animation:\"bordering 1s infinite\"}},e),{},{children:\"Speaking...\"}));default:return Object(E.jsx)(\"button\",Object(o.a)(Object(o.a)({type:\"button\",className:\"glow-on-hover\"},e),{},{children:\"Click to start\"}))}};function b(){const e=Object(h.useSpeechSynthesis)({onEnd:()=>{p(\"ENDSPEECH\")}}),t=e.speak,n=e.cancel,o=(e.speaking,Object(h.useSpeechRecognition)({onResult:e=>{p({type:\"ASRRESULT\",value:e})}})),r=o.listen,i=(o.listening,o.stop),s=Object(c.b)(g,{devTools:!0,actions:{recStart:Object(c.a)((()=>{console.log(\"Ready to receive a color command.\"),r({interimResults:!1,continuous:!0})})),recStop:Object(c.a)((()=>{console.log(\"Recognition stopped.\"),i()})),changeColour:Object(c.a)((e=>{console.log(\"Repainting...\"),document.body.style.background=e.recResult})),ttsStart:Object(c.a)(((e,n)=>{console.log(\"Speaking...\"),t({text:e.ttsAgenda})})),ttsCancel:Object(c.a)(((e,t)=>{console.log(\"TTS STOP...\"),n()}))}}),l=Object(a.a)(s,3),m=l[0],p=l[1];l[2];return Object(E.jsx)(\"div\",{className:\"App\",children:Object(E.jsx)(S,{state:m,onClick:()=>p(\"CLICK\")})})}const k=document.getElementById(\"root\");r.render(Object(E.jsx)(b,{}),k)}},[[35,1,2]]]);","name":"static/js/main.c7448048.chunk.js","map":{"version":3,"sources":["static/js/main.c7448048.chunk.js"],"names":["this","push","24","module","exports","__webpack_require__","35","__webpack_exports__","r","slicedToArray","objectSpread2","react_dom","Machine","actions","useMachine","browser","say","text","Object","_context","type","value","dmAppointment_listen","grammar","John","person","John Appleseed","Jack","Jack Jackson","Liana","Liana Jelena","Natalie","Natalie Portman","Bruce","Bob","Bob the builder","Shrek","Shrek from the swap","on Monday","day","Monday","on Tuesday","Tuesday","on Wednesday","Wednesday","on Thursday","Thursday","on Friday","Friday","on Satudary","Satudary","on Sunday","Sunday","10","time","at 10","ten","at ten","11","eleven","at 11","at eleven","12","twelve","at 12","at twelve","13","thirteen","at 13","at thirteen","14","fourteen","at 14","at fourteen","15","fifteen","at 15","at fifteen","16","sixteen","at 16","at sixteen","17","seventeen","at 17","at seventeen","18","eighteen","at 18","at eighteen","19","nineteen","at 19","at nineteen","20","twenty","at 20","at twenty","boolean_grammar","yes","agreement","Boolean","of course","sure","absolutely","yes please","no","disagreement","no way","absolutely not","never","maybe","uncertain","perhaps","I don't know","probably","dmMachine","initial","states","start_point","on","CLICK","choice_of_tool","id","RECOGNISED","context","task","recResult","target","prompt","entry","ENDSPEECH","ask","nomatch","choice","invoke","src","event","nluRequest","fetch","Request","proxyurl","method","headers","Origin","body","concat","then","data","json","onDone","intentResult","intent","name","console","log","onError","tool","cond","timer","to_do_item","appointment","who","length","specific","whole_day","canceled","repetition","confirmation","dist","jsx_runtime","url","iframe","machine","dm","asrtts","idle","LISTEN","SPEAK","ttsAgenda","recognising","exit","ASRRESULT","progress","match","speaking","recLogResult","test","logIntent","nluData","ReactiveButton","props","state","matches","className","style","animation","children","App","_useSpeechSynthesis","onEnd","send","speak","cancel","_useSpeechRecognition","onResult","result","listen","stop","listening","_useMachine","devTools","recStart","interimResults","continuous","recStop","changeColour","document","background","ttsStart","effect","ttsCancel","_useMachine2","current","onClick","rootElement","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpxstate-react-typescript-template\"] = this[\"webpackJsonpxstate-react-typescript-template\"] || []).push([[0],{\n\n/***/ 24:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 35:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./src/styles.scss\nvar styles = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(20);\n\n// EXTERNAL MODULE: ./node_modules/xstate/es/Machine.js + 2 modules\nvar Machine = __webpack_require__(41);\n\n// EXTERNAL MODULE: ./node_modules/xstate/es/actions.js\nvar actions = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./node_modules/@xstate/react/es/useMachine.js + 3 modules\nvar useMachine = __webpack_require__(40);\n\n// EXTERNAL MODULE: ./node_modules/@xstate/inspect/es/browser.js + 3 modules\nvar browser = __webpack_require__(39);\n\n// CONCATENATED MODULE: ./src/dmAppointment.ts\nfunction say(text){return Object(actions[\"k\" /* send */])(_context=>({type:\"SPEAK\",value:text}));}function dmAppointment_listen(){return Object(actions[\"k\" /* send */])('LISTEN');}const proxyurl=\"https://cors-anywhere.herokuapp.com/\";const rasaurl='https://rafalappointment.herokuapp.com/model/parse';const nluRequest=text=>fetch(new Request(proxyurl+rasaurl,{method:'POST',headers:{'Origin':'http://maraev.me'},// only required with proxy\nbody:\"{\\\"text\\\": \\\"\".concat(text,\"\\\"}\")})).then(data=>data.json());const grammar={\"John\":{person:\"John Appleseed\"},\"John Appleseed\":{person:\"John Appleseed\"},\"Jack\":{person:\"Jack Jackson\"},\"Jack Jackson\":{person:\"Jack Jackson\"},\"Liana\":{person:\"Liana Jelena\"},\"Liana Jelena\":{person:\"Liana Jelena\"},\"Natalie\":{person:\"Natalie Portman\"},\"Natalie Portman\":{person:\"Natalie Portman\"},\"Bruce\":{person:\"Bruce W\"},\"Bob\":{person:\"Bob the builder\"},\"Bob the builder\":{person:\"Bob the builder\"},\"Shrek\":{person:\"Shrek from the swamp\"},\"Shrek from the swap\":{person:\"Shrek\"},\"on Monday\":{day:\"Monday\"},\"Monday\":{day:\"Monday\"},\"on Tuesday\":{day:\"Tuesday\"},\"Tuesday\":{day:\"Tuesday\"},\"on Wednesday\":{day:\"Wednesday\"},\"Wednesday\":{day:\"Wednesday\"},\"on Thursday\":{day:\"Thursday\"},\"Thursday\":{day:\"Thursday\"},\"on Friday\":{day:\"Friday\"},\"Friday\":{day:\"Friday\"},\"on Satudary\":{day:\"Satuday\"},\"Satudary\":{day:\"Satuday\"},\"on Sunday\":{day:\"Sunday\"},\"Sunday\":{day:\"Sunday\"},\"10\":{time:\"10:00\"},\"at 10\":{time:\"10:00\"},\"ten\":{time:\"10:00\"},\"at ten\":{time:\"10:00\"},\"11\":{time:\"11:00\"},\"eleven\":{time:\"11:00\"},\"at 11\":{time:\"11:00\"},\"at eleven\":{time:\"11:00\"},\"12\":{time:\"12:00\"},\"twelve\":{time:\"12:00\"},\"at 12\":{time:\"12:00\"},\"at twelve\":{time:\"12:00\"},\"13\":{time:\"13:00\"},\"thirteen\":{time:\"13:00\"},\"at 13\":{time:\"13:00\"},\"at thirteen\":{time:\"13:00\"},\"14\":{time:\"14:00\"},\"fourteen\":{time:\"14:00\"},\"at 14\":{time:\"14:00\"},\"at fourteen\":{time:\"14:00\"},\"15\":{time:\"15:00\"},\"fifteen\":{time:\"15:00\"},\"at 15\":{time:\"15:00\"},\"at fifteen\":{time:\"15:00\"},\"16\":{time:\"16:00\"},\"sixteen\":{time:\"16:00\"},\"at 16\":{time:\"16:00\"},\"at sixteen\":{time:\"16:00\"},\"17\":{time:\"17:00\"},\"seventeen\":{time:\"17:00\"},\"at 17\":{time:\"17:00\"},\"at seventeen\":{time:\"17:00\"},\"18\":{time:\"18:00\"},\"eighteen\":{time:\"18:00\"},\"at 18\":{time:\"18:00\"},\"at eighteen\":{time:\"18:00\"},\"19\":{time:\"19:00\"},\"nineteen\":{time:\"19:00\"},\"at 19\":{time:\"19:00\"},\"at nineteen\":{time:\"19:00\"},\"20\":{time:\"20:00\"},\"twenty\":{time:\"20:00\"},\"at 20\":{time:\"20:00\"},\"at twenty\":{time:\"20:00\"}};const boolean_grammar={\"yes\":{agreement:Boolean(true)},\"of course\":{agreement:Boolean(true)},\"sure\":{agreement:Boolean(true)},\"absolutely\":{agreement:Boolean(true)},\"yes please\":{agreement:Boolean(true)},\"no\":{disagreement:Boolean(false)},\"no way\":{disagreement:Boolean(false)},\"absolutely not\":{disagreement:Boolean(false)},\"never\":{disagreement:Boolean(false)},\"maybe\":{uncertain:\"unsure\"},\"perhaps\":{uncertain:\"unsure\"},\"I don't know\":{uncertain:\"unsure\"},\"probably\":{uncertain:\"unsure\"}};const dmMachine={initial:'start_point',states:{start_point:{on:{CLICK:'choice_of_tool'}},choice_of_tool:{id:'make_a_choice',initial:\"prompt\",on:{RECOGNISED:[{actions:Object(actions[\"b\" /* assign */])(context=>{return{task:context.recResult};}),target:'choice'},{target:\".nomatch\"}]},states:{prompt:{entry:say(\"What would you like to do?\"),on:{ENDSPEECH:'ask'}},ask:{entry:dmAppointment_listen()},nomatch:{entry:say(\"Sorry, I didn't quite get you. Could you please repeat?\"),on:{ENDSPEECH:'ask'}}}},choice:{invoke:{id:'rasaApi',src:(context,event)=>nluRequest(context.task),onDone:{target:'tool',actions:[Object(actions[\"b\" /* assign */])((context,event)=>{return{intentResult:event.data.intent.name};}),(context,event)=>console.log(event.data)]},onError:{target:'choice_of_tool',actions:(context,event)=>console.log(event.data)}}},tool:{initial:'prompt',on:{ENDSPEECH:[{cond:context=>context.intentResult==='to_do_item',target:'to_do_item'},{cond:context=>context.intentResult==='appointment',target:'appointment'},{cond:context=>context.intentResult==='timer',target:'timer'},{target:'.nomatch'}]},states:{prompt:{entry:Object(actions[\"k\" /* send */])(context=>({type:\"SPEAK\",value:\"Ok, let's see if I can help you with \".concat(context.task,\".\")}))},nomatch:{entry:say(\"Excuse me, I haven't yet learned such task. Let's try again.\"),on:{ENDSPEECH:'#make_a_choice'}}}},timer:{initial:'prompt',on:{ENDSPEECH:'choice_of_tool'},states:{prompt:{entry:say(\"Welcome to the timer tool! Sorry, this tool has not yet been developed.\")}}},to_do_item:{initial:'prompt',on:{ENDSPEECH:'choice_of_tool'},states:{prompt:{entry:say(\"Welcome to the to do item tool! Sorry, this tool has not yet been developed.\")}}},appointment:{initial:'prompt',on:{ENDSPEECH:'who'},states:{prompt:{entry:say(\"Welcome to the appointment tool! Let's create an appointment.\")}}},who:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"person\"in(grammar[context.recResult]||{}),actions:Object(actions[\"b\" /* assign */])(context=>{return{person:grammar[context.recResult].person};}),target:\"day\"},{target:\".nomatch\"}]},states:{prompt:{entry:say(\"Who are you meeting with?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:dmAppointment_listen()},nomatch:{entry:Object(actions[\"k\" /* send */])(context=>({type:\"SPEAK\",value:\"Sorry, I don't know them. Please choose someone from your contacts list.\"})),on:{ENDSPEECH:\"ask\"}}}},day:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"day\"in(grammar[context.recResult]||{}),actions:Object(actions[\"b\" /* assign */])(context=>{return{day:grammar[context.recResult].day};}),target:\"length\"},{target:\".nomatch\"}]},states:{prompt:{entry:Object(actions[\"k\" /* send */])(context=>({type:\"SPEAK\",value:\"OK. \".concat(context.person,\". On which day is your meeting?\")})),on:{ENDSPEECH:\"ask\"}},ask:{entry:dmAppointment_listen()},nomatch:{entry:say(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},length:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),target:\"whole_day\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),target:\"time\"},{cond:context=>\"uncertain\"in(boolean_grammar[context.recResult]||{}),target:\".specific\"},{target:\".nomatch\"}]},states:{prompt:{entry:say(\"Will it take the whole day?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:dmAppointment_listen()},nomatch:{entry:say(\"Sorry, I did not understand you this time.\"),on:{ENDSPEECH:\"ask\"}},specific:{entry:say(\"please be more specific.\"),on:{ENDSPEECH:\"ask\"}}}},time:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"time\"in(grammar[context.recResult]||{}),actions:Object(actions[\"b\" /* assign */])(context=>{return{time:grammar[context.recResult].time};}),target:\"repetition\"},{target:\".nomatch\"}]},states:{prompt:{entry:say(\"What time is your meeting?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:dmAppointment_listen()},nomatch:{entry:say(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},whole_day:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),target:\"confirmation\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),target:\".canceled\"},{target:\".nomatch\"}]},states:{prompt:{entry:Object(actions[\"k\" /* send */])(context=>({type:\"SPEAK\",value:\"Do you want me to create an appointment with \".concat(context.person,\" on \").concat(context.day,\" for the whole day?\")})),on:{ENDSPEECH:\"ask\"}},ask:{entry:dmAppointment_listen()},canceled:{entry:say(\"The appointment has been canceled.\"),on:{ENDSPEECH:'#make_a_choice'}},nomatch:{entry:say(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},repetition:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),target:\"confirmation\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),target:\".canceled\"},{cond:context=>\"unsure\"in(boolean_grammar[context.recResult]||{}),target:\".specific\"},{target:\".nomatch\"}]},states:{prompt:{entry:Object(actions[\"k\" /* send */])(context=>({type:\"SPEAK\",value:\"Do you want me to create an appointment with \".concat(context.person,\" on \").concat(context.day,\" at \").concat(context.time,\"?\")})),on:{ENDSPEECH:\"ask\"}},canceled:{entry:say(\"The appointment has been cancell\\ed.\"),on:{ENDSPEECH:'#make_a_choice'}},ask:{entry:dmAppointment_listen()},specific:{entry:say(\"Please be more specific.\"),on:{ENDSPEECH:'ask'}},nomatch:{entry:say(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},confirmation:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),target:\"to_do_item\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),target:\"#make_a_choice\"},{cond:context=>\"unsure\"in(boolean_grammar[context.recResult]||{}),target:\".specific\"},{target:\".nomatch\"}]},states:{prompt:{entry:say(\"Your appointment has been created! Would you like to add it to your to do list? \"),on:{ENDSPEECH:'ask'}},ask:{entry:dmAppointment_listen()},nomatch:{entry:say(\"Sorry, I did not get you.\")},specific:{entry:say(\"Please be more specific\"),on:{ENDSPEECH:'ask'}}}}}};\n// EXTERNAL MODULE: ./node_modules/react-speech-kit/dist/index.js\nvar dist = __webpack_require__(19);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(12);\n\n// CONCATENATED MODULE: ./src/index.tsx\nObject(browser[\"a\" /* inspect */])({url:\"https://statecharts.io/inspect\",iframe:false});const machine=Object(Machine[\"a\" /* Machine */])({id:'root',type:'parallel',states:{dm:Object(objectSpread2[\"a\" /* default */])({},dmMachine),asrtts:{initial:'idle',states:{idle:{on:{LISTEN:'recognising',SPEAK:{target:'speaking',actions:Object(actions[\"b\" /* assign */])((_context,event)=>{return{ttsAgenda:event.value};})}}},recognising:{initial:'progress',entry:'recStart',exit:'recStop',on:{ASRRESULT:{actions:['recLogResult',Object(actions[\"b\" /* assign */])((_context,event)=>{return{recResult:event.value};})],target:'.match'},RECOGNISED:'idle'},states:{progress:{},match:{entry:Object(actions[\"k\" /* send */])('RECOGNISED')}}},speaking:{entry:'ttsStart',on:{ENDSPEECH:'idle'}}}}}},{actions:{recLogResult:context=>{/* context.recResult = event.recResult; */console.log('<< ASR: '+context.recResult);},test:()=>{console.log('test');},logIntent:context=>{/* context.nluData = event.data */console.log('<< NLU intent: '+context.nluData.intent.name);}}});const ReactiveButton=props=>{switch(true){case props.state.matches({asrtts:'recognising'}):return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({type:\"button\",className:\"glow-on-hover\",style:{animation:\"glowing 20s linear\"}},props),{},{children:\"Listening...\"}));case props.state.matches({asrtts:'speaking'}):return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({type:\"button\",className:\"glow-on-hover\",style:{animation:\"bordering 1s infinite\"}},props),{},{children:\"Speaking...\"}));default:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({type:\"button\",className:\"glow-on-hover\"},props),{},{children:\"Click to start\"}));}};function App(){const _useSpeechSynthesis=Object(dist[\"useSpeechSynthesis\"])({onEnd:()=>{send('ENDSPEECH');}}),speak=_useSpeechSynthesis.speak,cancel=_useSpeechSynthesis.cancel,speaking=_useSpeechSynthesis.speaking;const _useSpeechRecognition=Object(dist[\"useSpeechRecognition\"])({onResult:result=>{send({type:\"ASRRESULT\",value:result});}}),listen=_useSpeechRecognition.listen,listening=_useSpeechRecognition.listening,stop=_useSpeechRecognition.stop;const _useMachine=Object(useMachine[\"b\" /* useMachine */])(machine,{devTools:true,actions:{recStart:Object(useMachine[\"a\" /* asEffect */])(()=>{console.log('Ready to receive a color command.');listen({interimResults:false,continuous:true});}),recStop:Object(useMachine[\"a\" /* asEffect */])(()=>{console.log('Recognition stopped.');stop();}),changeColour:Object(useMachine[\"a\" /* asEffect */])(context=>{console.log('Repainting...');document.body.style.background=context.recResult;}),ttsStart:Object(useMachine[\"a\" /* asEffect */])((context,effect)=>{console.log('Speaking...');speak({text:context.ttsAgenda});}),ttsCancel:Object(useMachine[\"a\" /* asEffect */])((context,effect)=>{console.log('TTS STOP...');cancel();})/* speak: asEffect((context) => {\r\n\t     * console.log('Speaking...');\r\n             *     speak({text: context.ttsAgenda })\r\n             * } */}}),_useMachine2=Object(slicedToArray[\"a\" /* default */])(_useMachine,3),current=_useMachine2[0],send=_useMachine2[1],service=_useMachine2[2];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ReactiveButton,{state:current,onClick:()=>send('CLICK')})});};/* RASA API\r\n *  */const src_proxyurl=\"https://cors-anywhere.herokuapp.com/\";const src_rasaurl='https://rafalappointment.herokuapp.com/model/parse';const src_nluRequest=text=>fetch(new Request(src_proxyurl+src_rasaurl,{method:'POST',headers:{'Origin':'http://maraev.me'},// only required with proxy\nbody:\"{\\\"text\\\": \\\"\".concat(text,\"\\\"}\")})).then(data=>data.json());const rootElement=document.getElementById(\"root\");react_dom[\"render\"](/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(App,{}),rootElement);\n\n/***/ })\n\n},[[35,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\R\\Desktop\\DialogueSystems\\Lab2\\react-xstate-colourchanger\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-6-0!C:\\Users\\R\\Desktop\\DialogueSystems\\Lab2\\react-xstate-colourchanger\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-6-1!C:\\Users\\R\\Desktop\\DialogueSystems\\Lab2\\react-xstate-colourchanger\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\R\\Desktop\\DialogueSystems\\Lab2\\react-xstate-colourchanger\\node_modules\\resolve-url-loader\\index.js??ref--5-oneOf-6-3!C:\\Users\\R\\Desktop\\DialogueSystems\\Lab2\\react-xstate-colourchanger\\node_modules\\sass-loader\\dist\\cjs.js??ref--5-oneOf-6-4!C:\\Users\\R\\Desktop\\DialogueSystems\\Lab2\\react-xstate-colourchanger\\src\\styles.scss","C:/Users/R/Desktop/DialogueSystems/Lab2/react-xstate-colourchanger/src/dmAppointment.ts","C:/Users/R/Desktop/DialogueSystems/Lab2/react-xstate-colourchanger/src/index.tsx"],"names":["say","text","send","_context","type","value","listen","proxyurl","rasaurl","nluRequest","fetch","Request","method","headers","body","then","data","json","grammar","person","day","time","boolean_grammar","agreement","Boolean","disagreement","uncertain","dmMachine","initial","states","start_point","on","CLICK","choice_of_tool","id","RECOGNISED","actions","assign","context","task","recResult","target","prompt","entry","ENDSPEECH","ask","nomatch","choice","invoke","src","event","onDone","intentResult","intent","name","console","log","onError","tool","cond","timer","to_do_item","appointment","who","length","specific","whole_day","canceled","repetition","confirmation","inspect","url","iframe","machine","Machine","dm","asrtts","idle","LISTEN","SPEAK","ttsAgenda","recognising","exit","ASRRESULT","progress","match","speaking","recLogResult","test","logIntent","nluData","ReactiveButton","props","state","matches","animation","App","useSpeechSynthesis","onEnd","speak","cancel","useSpeechRecognition","onResult","result","listening","stop","useMachine","devTools","recStart","asEffect","interimResults","continuous","recStop","changeColour","document","style","background","ttsStart","effect","ttsCancel","current","service","rootElement","getElementById","ReactDOM"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import { MachineConfig, send, Action, assign } from \"xstate\";\r\n\r\n\r\nfunction say(text: string): Action<SDSContext, SDSEvent> {\r\n    return send((_context: SDSContext) => ({ type: \"SPEAK\", value: text }))\r\n}\r\n\r\nfunction listen(): Action<SDSContext, SDSEvent> {\r\n    return send('LISTEN')\r\n}\r\n\r\n\r\nconst proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\nconst rasaurl = 'https://rafalappointment.herokuapp.com/model/parse'\r\nconst nluRequest = (text: string) =>\r\n    fetch(new Request(proxyurl + rasaurl, {\r\n        method: 'POST',\r\n        headers: { 'Origin': 'http://maraev.me' }, // only required with proxy\r\n        body: `{\"text\": \"${text}\"}`\r\n    }))\r\n        .then(data => data.json()); \r\n\r\nconst grammar: { [index: string]: { person?: string, day?: string, time?: string } } = {\r\n    \"John\": { person: \"John Appleseed\" },\r\n    \"John Appleseed\": { person: \"John Appleseed\" },\r\n    \"Jack\": { person: \"Jack Jackson\" },\r\n    \"Jack Jackson\": { person: \"Jack Jackson\" },\r\n    \"Liana\": { person: \"Liana Jelena\" },\r\n    \"Liana Jelena\": { person: \"Liana Jelena\" },\r\n    \"Natalie\": { person: \"Natalie Portman\" },\r\n    \"Natalie Portman\": { person: \"Natalie Portman\" },\r\n    \"Bruce\": { person: \"Bruce W\" },\r\n    \"Bob\": { person: \"Bob the builder\" },\r\n    \"Bob the builder\": { person: \"Bob the builder\" },\r\n    \"Shrek\": { person: \"Shrek from the swamp\" },\r\n    \"Shrek from the swap\": { person: \"Shrek\" },\r\n\r\n    \"on Monday\": {day: \"Monday\" },\r\n    \"Monday\": {day: \"Monday\" },\r\n    \"on Tuesday\": {day: \"Tuesday\" },\r\n    \"Tuesday\": {day: \"Tuesday\" },\r\n    \"on Wednesday\": {day: \"Wednesday\" },\r\n    \"Wednesday\": {day: \"Wednesday\" },\r\n    \"on Thursday\": {day: \"Thursday\" },\r\n    \"Thursday\": {day: \"Thursday\" },\r\n    \"on Friday\": {day: \"Friday\" },\r\n    \"Friday\": {day: \"Friday\" },\r\n    \"on Satudary\": {day: \"Satuday\" },\r\n    \"Satudary\": {day: \"Satuday\" },\r\n    \"on Sunday\": {day: \"Sunday\" },\r\n    \"Sunday\": {day: \"Sunday\" },\r\n\r\n    \"10\": { time: \"10:00\" },\r\n    \"at 10\": { time: \"10:00\" },\r\n    \"ten\": { time: \"10:00\" },\r\n    \"at ten\": { time: \"10:00\" },\r\n    \"11\": { time: \"11:00\" },\r\n    \"eleven\": { time: \"11:00\" },\r\n    \"at 11\": { time: \"11:00\" },\r\n    \"at eleven\": { time: \"11:00\" },\r\n    \"12\": { time: \"12:00\" },\r\n    \"twelve\": { time: \"12:00\" },\r\n    \"at 12\": { time: \"12:00\" },\r\n    \"at twelve\": { time: \"12:00\" },\r\n    \"13\": { time: \"13:00\" },\r\n    \"thirteen\": { time: \"13:00\" },\r\n    \"at 13\": { time: \"13:00\" },\r\n    \"at thirteen\": { time: \"13:00\" },\r\n    \"14\": { time: \"14:00\" },\r\n    \"fourteen\": { time: \"14:00\" },\r\n    \"at 14\": { time: \"14:00\" },\r\n    \"at fourteen\": { time: \"14:00\" },\r\n    \"15\": { time: \"15:00\" },\r\n    \"fifteen\": { time: \"15:00\" },\r\n    \"at 15\": { time: \"15:00\" },\r\n    \"at fifteen\": { time: \"15:00\" },\r\n    \"16\": { time: \"16:00\" },\r\n    \"sixteen\": { time: \"16:00\" },\r\n    \"at 16\": { time: \"16:00\" },\r\n    \"at sixteen\": { time: \"16:00\" },\r\n    \"17\": { time: \"17:00\" },\r\n    \"seventeen\": { time: \"17:00\" },\r\n    \"at 17\": { time: \"17:00\" },\r\n    \"at seventeen\": { time: \"17:00\" },\r\n    \"18\": { time: \"18:00\" },\r\n    \"eighteen\": { time: \"18:00\" },\r\n    \"at 18\": { time: \"18:00\" },\r\n    \"at eighteen\": { time: \"18:00\" },\r\n    \"19\": { time: \"19:00\" },\r\n    \"nineteen\": { time: \"19:00\" },\r\n    \"at 19\": { time: \"19:00\" },\r\n    \"at nineteen\": { time: \"19:00\" },\r\n    \"20\": { time: \"20:00\" },\r\n    \"twenty\": { time: \"20:00\" },\r\n    \"at 20\": { time: \"20:00\" },\r\n    \"at twenty\": { time: \"20:00\" },\r\n\r\n}\r\n\r\nconst boolean_grammar: {[index: string]: {agreement?: boolean, disagreement?: boolean, uncertain?: string}} = {\r\n    \"yes\": {agreement: Boolean(true)},\r\n    \"of course\": {agreement: Boolean(true)},\r\n    \"sure\": {agreement: Boolean(true)},\r\n    \"absolutely\": {agreement: Boolean(true)},\r\n    \"yes please\": {agreement: Boolean(true)},\r\n    \"no\": {disagreement: Boolean(false)},\r\n    \"no way\": {disagreement: Boolean(false)},\r\n    \"absolutely not\": {disagreement: Boolean(false)},\r\n    \"never\": {disagreement: Boolean(false)},\r\n    \"maybe\": {uncertain: \"unsure\"},\r\n    \"perhaps\": {uncertain: \"unsure\"},\r\n    \"I don't know\": {uncertain: \"unsure\"},\r\n    \"probably\": {uncertain: \"unsure\"},\r\n}\r\n\r\nexport const dmMachine: MachineConfig<SDSContext, any, SDSEvent> = ({\r\n    \r\n    initial: 'start_point',\r\n    states: {\r\n        start_point:{\r\n            on: {\r\n                CLICK: 'choice_of_tool'\r\n            }\r\n        },\r\n        choice_of_tool:{\r\n            id: 'make_a_choice',\r\n            initial: \"prompt\",\r\n            on: {\r\n                RECOGNISED:[{\r\n                    actions: assign((context) => { return { task: context.recResult } }),\r\n                    target: 'choice'},\r\n                \r\n                {target: \".nomatch\"}]\r\n            },\r\n            states:{\r\n                prompt: { entry: say(\"What would you like to do?\"),\r\n                        on: {ENDSPEECH: 'ask'}\r\n                },\r\n                ask: {\r\n                    entry: listen()\r\n                },\r\n                nomatch: { entry: say(\"Sorry, I didn't quite get you. Could you please repeat?\"),\r\n                on: {ENDSPEECH: 'ask'}}\r\n            }\r\n        },\r\n        choice:{\r\n            invoke: {\r\n                id: 'rasaApi',\r\n                src: (context, event) =>  nluRequest(context.task),\r\n                onDone:{\r\n                    target: 'tool',\r\n                    actions:[\r\n                        assign((context, event) => { return { intentResult: event.data.intent.name} }),\r\n                        (context:SDSContext, event:any) => console.log(event.data)]\r\n                },\r\n                onError:{\r\n                    target: 'choice_of_tool',\r\n                    actions: (context, event) => console.log(event.data)\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n        tool:{\r\n            initial: 'prompt',\r\n            on:{\r\n                ENDSPEECH:[{\r\n                    cond: (context) => context.intentResult === 'to_do_item',\r\n                    target: 'to_do_item'},\r\n                    {cond: (context) => context.intentResult === 'appointment',\r\n                    target: 'appointment'},\r\n                    {cond: (context) => context.intentResult === 'timer',\r\n                    target: 'timer'},\r\n                {target:'.nomatch'}]\r\n            },\r\n            states: {\r\n                prompt: {\r\n                    entry: send((context) => ({\r\n                        type: \"SPEAK\",\r\n                        value: `Ok, let's see if I can help you with ${context.task}.`}))},\r\n                nomatch: {\r\n                    entry: say(\"Excuse me, I haven't yet learned such task. Let's try again.\"),\r\n                    on: {ENDSPEECH: '#make_a_choice'}\r\n                        \r\n                    }\r\n                        \r\n                }\r\n\r\n        },\r\n        timer: {\r\n            initial: 'prompt',\r\n            on: {ENDSPEECH: 'choice_of_tool'},\r\n            states:{\r\n                prompt:{\r\n                    entry: say(\"Welcome to the timer tool! Sorry, this tool has not yet been developed.\")\r\n                }\r\n            }\r\n        },\r\n        to_do_item: {\r\n            initial: 'prompt',\r\n            on: {ENDSPEECH: 'choice_of_tool'},\r\n            states:{\r\n                prompt:{\r\n                    entry: say(\"Welcome to the to do item tool! Sorry, this tool has not yet been developed.\")\r\n                }\r\n            }\r\n        },\r\n        appointment:{\r\n            initial: 'prompt',\r\n            on:{ ENDSPEECH: 'who'\r\n            },\r\n            states:{\r\n                prompt:{\r\n                    entry: say(\"Welcome to the appointment tool! Let's create an appointment.\")\r\n                }\r\n            }\r\n        },\r\n            who: {\r\n                initial: \"prompt\",\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"person\" in (grammar[context.recResult] || {}),\r\n                        actions: assign((context) => { return { person: grammar[context.recResult].person } }),\r\n                        target: \"day\"},\r\n    \r\n                    { target: \".nomatch\" }]\r\n                },\r\n                states: {\r\n                    prompt: {\r\n                        entry: say(\"Who are you meeting with?\"),\r\n                        on: { ENDSPEECH: \"ask\" }\r\n                    },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    nomatch: { entry: send((context) => ({\r\n                            type: \"SPEAK\",\r\n                            value: `Sorry, I don't know them. Please choose someone from your contacts list.`})),\r\n                            on: {ENDSPEECH: \"ask\"}}\r\n        \r\n                    }\r\n            },\r\n            day: {\r\n                initial: \"prompt\",\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"day\" in (grammar[context.recResult] || {}),\r\n                        actions: assign((context) => {return{ day: grammar[context.recResult].day}}),\r\n                        target: \"length\"\r\n                    },\r\n                    {target: \".nomatch\"}]\r\n                },\r\n                states: {\r\n                    prompt: {\r\n                        entry: send((context) => ({\r\n                            type: \"SPEAK\",\r\n                            value: `OK. ${context.person}. On which day is your meeting?`})),\r\n                        on: {ENDSPEECH: \"ask\"}\r\n                        },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    nomatch: {\r\n                        entry: say(\"Sorry, I don't understand. Please repeat\"),\r\n                        on: {ENDSPEECH: \"ask\"}\r\n                    }\r\n                }\r\n            },\r\n            length: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"whole_day\"},\r\n\r\n                        {cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"time\"},\r\n\r\n                        {cond: (context) => \"uncertain\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \".specific\"},\r\n\r\n                    {target:\".nomatch\"}]\r\n\r\n                    },\r\n                states: {\r\n                    prompt: {\r\n                        entry: say(\"Will it take the whole day?\"),\r\n                        on: {ENDSPEECH: \"ask\"}\r\n                    },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    nomatch: {\r\n                        entry: say(\"Sorry, I did not understand you this time.\"),\r\n                    on: {ENDSPEECH: \"ask\"}\r\n                    },\r\n                    specific: {\r\n                        entry: say(\"please be more specific.\"),\r\n                    on: {ENDSPEECH: \"ask\"},\r\n                    }\r\n                }\r\n            },\r\n            time: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"time\" in (grammar[context.recResult] || {}),\r\n                        actions: assign((context) => {return{ time: grammar[context.recResult].time}}),\r\n                        target: \"repetition\"\r\n                        },\r\n                    {\r\n                    target: \".nomatch\"\r\n                    }]\r\n                },\r\n                states: {\r\n                    prompt: {\r\n                        entry: say(\"What time is your meeting?\"),\r\n                        on: {ENDSPEECH: \"ask\"}\r\n                    },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    nomatch: {\r\n                        entry: say(\"Sorry, I don't understand. Please repeat\"),\r\n                        on: {ENDSPEECH: \"ask\"}}\r\n                    }\r\n            },\r\n            whole_day: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"confirmation\"},\r\n                        {\r\n                        cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \".canceled\"},\r\n\r\n                    {target: \".nomatch\"}]\r\n                },\r\n                states:{\r\n                    prompt:{\r\n                        entry: send((context) => ({\r\n                            type: \"SPEAK\",\r\n                            value:`Do you want me to create an appointment with ${context.person} on ${context.day} for the whole day?`})),\r\n                        on: {ENDSPEECH: \"ask\"}\r\n\r\n                    },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    canceled: {\r\n                        entry: say(\"The appointment has been canceled.\"),\r\n                        on: {ENDSPEECH: '#make_a_choice'}\r\n\r\n                    },\r\n                    nomatch: {\r\n                        entry: say(\"Sorry, I don't understand. Please repeat\"),\r\n                        on: {ENDSPEECH: \"ask\"}}\r\n                }\r\n            },\r\n            repetition: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"confirmation\"},\r\n                        {\r\n                        cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \".canceled\"},\r\n                        {cond: (context) => \"unsure\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \".specific\"},\r\n                    {target: \".nomatch\"}]\r\n                },\r\n                states:{\r\n                    prompt:{\r\n                        entry: send((context) => ({\r\n                            type: \"SPEAK\",\r\n                            value:`Do you want me to create an appointment with ${context.person} on ${context.day} at ${context.time}?`})),\r\n                            on: {ENDSPEECH: \"ask\"}\r\n                    },\r\n                    canceled: {\r\n                        entry: say(\"The appointment has been cancell\\ed.\"),\r\n                        on: {ENDSPEECH: '#make_a_choice'}\r\n                    },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    specific:{\r\n                        entry: say(\"Please be more specific.\"),\r\n                        on: {ENDSPEECH: 'ask'}\r\n                    },\r\n                    nomatch: {\r\n                        entry: say(\"Sorry, I don't understand. Please repeat\"),\r\n                        on: {ENDSPEECH: \"ask\"}}}\r\n            },\r\n            confirmation: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                     RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"to_do_item\"},\r\n                        {\r\n                        cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"#make_a_choice\"},\r\n                        {\r\n                        cond: (context) => \"unsure\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \".specific\"},\r\n\r\n                    {target: \".nomatch\"}]\r\n                },\r\n                states: {\r\n                    prompt: {\r\n                        entry: say(\"Your appointment has been created! Would you like to add it to your to do list? \"),\r\n                        on: {ENDSPEECH: 'ask'}\r\n                    },\r\n                    ask: {entry: listen(),\r\n                    },\r\n                    nomatch:{\r\n                        entry: say(\"Sorry, I did not get you.\")\r\n                    },\r\n                    specific:{\r\n                        entry: say(\"Please be more specific\"),\r\n                        on: {ENDSPEECH: 'ask'}\r\n                    }\r\n                }\r\n            },\r\n        }\r\n})","import \"./styles.scss\";\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { Machine, assign, send, State } from \"xstate\";\r\nimport { useMachine, asEffect } from \"@xstate/react\";\r\nimport { inspect } from \"@xstate/inspect\";\r\nimport { dmMachine } from \"./dmAppointment\";\r\n\r\n\r\ninspect({\r\n    url: \"https://statecharts.io/inspect\",\r\n    iframe: false\r\n});\r\n\r\nimport { useSpeechSynthesis, useSpeechRecognition } from 'react-speech-kit';\r\n\r\n\r\nconst machine = Machine<SDSContext, any, SDSEvent>({\r\n    id: 'root',\r\n    type: 'parallel',\r\n    states: {\r\n        dm: {\r\n            ...dmMachine\r\n        },\r\n        asrtts: {\r\n            initial: 'idle',\r\n            states: {\r\n                idle: {\r\n                    on: {\r\n                        LISTEN: 'recognising',\r\n                        SPEAK: {\r\n                            target: 'speaking',\r\n                            actions: assign((_context, event) => { return { ttsAgenda: event.value } })\r\n                        }\r\n                    }\r\n                },\r\n                recognising: {\r\n                    initial: 'progress',\r\n                    entry: 'recStart',\r\n                    exit: 'recStop',\r\n                    on: {\r\n                        ASRRESULT: {\r\n                            actions: ['recLogResult',\r\n                                assign((_context, event) => { return { recResult: event.value } })],\r\n                            target: '.match'\r\n                        },\r\n                        RECOGNISED: 'idle'\r\n                    },\r\n                    states: {\r\n                        progress: {},\r\n                        match: {\r\n                            entry: send('RECOGNISED'),\r\n                        },\r\n                    }\r\n                },\r\n                speaking: {\r\n                    entry: 'ttsStart',\r\n                    on: {\r\n                        ENDSPEECH: 'idle',\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n},\r\n    {\r\n        actions: {\r\n            recLogResult: (context: SDSContext) => {\r\n                /* context.recResult = event.recResult; */\r\n                console.log('<< ASR: ' + context.recResult);\r\n            },\r\n            test: () => {\r\n                console.log('test')\r\n            },\r\n            logIntent: (context: SDSContext) => {\r\n                /* context.nluData = event.data */\r\n                console.log('<< NLU intent: ' + context.nluData.intent.name)\r\n            }\r\n        },\r\n    });\r\n\r\n\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLElement> {\r\n    state: State<SDSContext, any, any, any>;\r\n}\r\nconst ReactiveButton = (props: Props): JSX.Element => {\r\n    switch (true) {\r\n        case props.state.matches({ asrtts: 'recognising' }):\r\n            return (\r\n                <button type=\"button\" className=\"glow-on-hover\"\r\n                    style={{ animation: \"glowing 20s linear\" }} {...props}>\r\n                    Listening...\r\n                </button>\r\n            );\r\n        case props.state.matches({ asrtts: 'speaking' }):\r\n            return (\r\n                <button type=\"button\" className=\"glow-on-hover\"\r\n                    style={{ animation: \"bordering 1s infinite\" }} {...props}>\r\n                    Speaking...\r\n                </button>\r\n            );\r\n        default:\r\n            return (\r\n                <button type=\"button\" className=\"glow-on-hover\" {...props}>\r\n                    Click to start\r\n                </button >\r\n            );\r\n    }\r\n}\r\n\r\nfunction App() {\r\n    const { speak, cancel, speaking } = useSpeechSynthesis({\r\n        onEnd: () => {\r\n            send('ENDSPEECH');\r\n        },\r\n    });\r\n    const { listen, listening, stop } = useSpeechRecognition({\r\n        onResult: (result: any) => {\r\n            send({ type: \"ASRRESULT\", value: result });\r\n        },\r\n    });\r\n    const [current, send, service] = useMachine(machine, {\r\n        devTools: true,\r\n        actions: {\r\n            recStart: asEffect(() => {\r\n                console.log('Ready to receive a color command.');\r\n                listen({\r\n                    interimResults: false,\r\n                    continuous: true\r\n                });\r\n            }),\r\n            recStop: asEffect(() => {\r\n                console.log('Recognition stopped.');\r\n                stop()\r\n            }),\r\n            changeColour: asEffect((context) => {\r\n                console.log('Repainting...');\r\n                document.body.style.background = context.recResult;\r\n            }),\r\n            ttsStart: asEffect((context, effect) => {\r\n                console.log('Speaking...');\r\n                speak({ text: context.ttsAgenda })\r\n            }),\r\n            ttsCancel: asEffect((context, effect) => {\r\n                console.log('TTS STOP...');\r\n                cancel()\r\n            })\r\n            /* speak: asEffect((context) => {\r\n\t     * console.log('Speaking...');\r\n             *     speak({text: context.ttsAgenda })\r\n             * } */\r\n        }\r\n    });\r\n\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <ReactiveButton state={current} onClick={() => send('CLICK')} />\r\n        </div>\r\n    )\r\n};\r\n\r\n\r\n\r\n/* RASA API\r\n *  */\r\nconst proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\nconst rasaurl = 'https://rafalappointment.herokuapp.com/model/parse'\r\nconst nluRequest = (text: string) =>\r\n    fetch(new Request(proxyurl + rasaurl, {\r\n        method: 'POST',\r\n        headers: { 'Origin': 'http://maraev.me' }, // only required with proxy\r\n        body: `{\"text\": \"${text}\"}`\r\n    }))\r\n        .then(data => data.json());\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n    <App />,\r\n    rootElement);\r\n"]}}