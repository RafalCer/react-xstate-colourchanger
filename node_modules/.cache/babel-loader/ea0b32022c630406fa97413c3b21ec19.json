{"ast":null,"code":"import { send, assign } from \"xstate\";\nimport { loadGrammar } from './runparser';\nimport { parse } from './chartparser';\nimport { grammar } from './grammars/houseGrammar';\nconst gramm = loadGrammar(grammar);\n\nconst UsersCommand = recResult => {\n  let prs = parse(recResult.split(/\\s+/), gramm);\n  const result = prs.resultsForRule(gramm.$root)[0];\n  const HouseOrder = [result.request.object, result.request.action];\n  return result;\n};\n\n_c = UsersCommand;\nimport { say } from './dmAppointment';\nimport { listen } from './dmAppointment';\nexport const dmMachine = {\n  initial: 'init',\n  states: {\n    init: {\n      on: {\n        CLICK: 'welcome'\n      }\n    },\n    welcome: {\n      id: 'welcome_state',\n      initial: \"prompt\",\n      on: {\n        RECOGNISED: [{\n          cond: context => \"HouseOrder\" in (UsersCommand(context.recResult) || {}),\n          actions: assign(context => {\n            return {\n              HouseCommand: UsersCommand(context.recResult)\n            };\n          }),\n          target: 'action'\n        }, {\n          target: \".nomatch\"\n        }]\n      },\n      states: {\n        prompt: {\n          entry: say('What would you like me to do?'),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        },\n        ask: {\n          entry: listen()\n        },\n        nomatch: {\n          entry: say('Sorry, I did not quite get you. Please repeat.'),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        }\n      }\n    },\n    action: {\n      initial: \"prompt\",\n      states: {\n        prompt: {\n          entry: send(context => ({\n            type: \"SPEAK\",\n            value: \"Understood! I will now \".concat(context.HouseCommand.action, \" the \").concat(context.HouseCommand.object, \".\")\n          })),\n          on: {\n            ENDSPEECH: \"#welcome_state\"\n          }\n        }\n      }\n    }\n  }\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"UsersCommand\");","map":{"version":3,"sources":["C:/Users/R/Desktop/DialogueSystems/Lab2/react-xstate-colourchanger/src/dmSmartHome.ts"],"names":["send","assign","loadGrammar","parse","grammar","gramm","UsersCommand","recResult","prs","split","result","resultsForRule","$root","HouseOrder","request","object","action","say","listen","dmMachine","initial","states","init","on","CLICK","welcome","id","RECOGNISED","cond","context","actions","HouseCommand","target","prompt","entry","ENDSPEECH","ask","nomatch","type","value"],"mappings":"AAAA,SAAwBA,IAAxB,EAAsCC,MAAtC,QAAoD,QAApD;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,KAAT,QAAsB,eAAtB;AACA,SAASC,OAAT,QAAwB,yBAAxB;AACA,MAAMC,KAAK,GAAGH,WAAW,CAACE,OAAD,CAAzB;;AAEA,MAAME,YAAY,GAAIC,SAAD,IAAuB;AAC5C,MAAIC,GAAG,GAAGL,KAAK,CAACI,SAAS,CAACE,KAAV,CAAgB,KAAhB,CAAD,EAAyBJ,KAAzB,CAAf;AACA,QAAMK,MAAM,GAAGF,GAAG,CAACG,cAAJ,CAAmBN,KAAK,CAACO,KAAzB,EAAgC,CAAhC,CAAf;AACA,QAAMC,UAAU,GAAG,CAACH,MAAM,CAACI,OAAP,CAAeC,MAAhB,EAAwBL,MAAM,CAACI,OAAP,CAAeE,MAAvC,CAAnB;AACA,SAAON,MAAP;AAAc,CAJd;;KAAMJ,Y;AAMN,SAASW,GAAT,QAAoB,iBAApB;AACA,SAASC,MAAT,QAAuB,iBAAvB;AAEA,OAAO,MAAMC,SAAmD,GAAI;AAChEC,EAAAA,OAAO,EAAE,MADuD;AAEhEC,EAAAA,MAAM,EAAE;AACJC,IAAAA,IAAI,EAAE;AACFC,MAAAA,EAAE,EAAE;AAACC,QAAAA,KAAK,EAAE;AAAR;AADF,KADF;AAIJC,IAAAA,OAAO,EACP;AACIC,MAAAA,EAAE,EAAE,eADR;AAEIN,MAAAA,OAAO,EAAE,QAFb;AAGIG,MAAAA,EAAE,EAAC;AACCI,QAAAA,UAAU,EAAC,CAAC;AACRC,UAAAA,IAAI,EAAGC,OAAD,IAAa,iBAAiBvB,YAAY,CAACuB,OAAO,CAACtB,SAAT,CAAZ,IAAmC,EAApD,CADX;AAERuB,UAAAA,OAAO,EAAE7B,MAAM,CAAE4B,OAAD,IAAa;AAAE,mBAAO;AAAEE,cAAAA,YAAY,EAAEzB,YAAY,CAACuB,OAAO,CAACtB,SAAT;AAA5B,aAAP;AAAyD,WAAzE,CAFP;AAGRyB,UAAAA,MAAM,EAAE;AAHA,SAAD,EAKX;AAACA,UAAAA,MAAM,EAAE;AAAT,SALW;AADZ,OAHP;AAWIX,MAAAA,MAAM,EAAE;AACJY,QAAAA,MAAM,EAAE;AACJC,UAAAA,KAAK,EAAEjB,GAAG,CAAC,+BAAD,CADN;AAEJM,UAAAA,EAAE,EAAE;AAAEY,YAAAA,SAAS,EAAE;AAAb;AAFA,SADJ;AAKJC,QAAAA,GAAG,EAAE;AACDF,UAAAA,KAAK,EAAEhB,MAAM;AADZ,SALD;AAQJmB,QAAAA,OAAO,EAAE;AACLH,UAAAA,KAAK,EAAEjB,GAAG,CAAC,gDAAD,CADL;AAELM,UAAAA,EAAE,EAAE;AAAEY,YAAAA,SAAS,EAAE;AAAb;AAFC;AARL;AAXZ,KALI;AA8BJnB,IAAAA,MAAM,EAAE;AACJI,MAAAA,OAAO,EAAE,QADL;AAEJC,MAAAA,MAAM,EAAE;AACJY,QAAAA,MAAM,EAAE;AACJC,UAAAA,KAAK,EAAElC,IAAI,CAAE6B,OAAD,KAAc;AACtBS,YAAAA,IAAI,EAAE,OADgB;AAEtBC,YAAAA,KAAK,mCAA4BV,OAAO,CAACE,YAAR,CAAqBf,MAAjD,kBAA+Da,OAAO,CAACE,YAAR,CAAqBhB,MAApF;AAFiB,WAAd,CAAD,CADP;AAIJQ,UAAAA,EAAE,EAAE;AAACY,YAAAA,SAAS,EAAE;AAAZ;AAJA;AADJ;AAFJ;AA9BJ;AAFwD,CAA7D","sourcesContent":["import { MachineConfig, send, Action, assign } from \"xstate\";\r\nimport { loadGrammar } from './runparser'\r\nimport { parse } from './chartparser'\r\nimport { grammar } from './grammars/houseGrammar'\r\nconst gramm = loadGrammar(grammar)\r\n\r\nconst UsersCommand = (recResult: string) => {\r\nlet prs = parse(recResult.split(/\\s+/), gramm);\r\nconst result = prs.resultsForRule(gramm.$root)[0];     \r\nconst HouseOrder = [result.request.object, result.request.action]\r\nreturn result}\r\n\r\nimport { say } from './dmAppointment'\r\nimport { listen } from './dmAppointment'\r\n\r\nexport const dmMachine: MachineConfig<SDSContext, any, SDSEvent> = ({\r\n    initial: 'init',\r\n    states: {\r\n        init: {\r\n            on: {CLICK: 'welcome'}\r\n        },\r\n        welcome: \r\n        {\r\n            id: 'welcome_state',\r\n            initial: \"prompt\",\r\n            on:{\r\n                RECOGNISED:[{\r\n                    cond: (context) => \"HouseOrder\" in (UsersCommand(context.recResult) || {}),\r\n                    actions: assign((context) => { return { HouseCommand: UsersCommand(context.recResult) }}),\r\n                    target: 'action'},\r\n\r\n                {target: \".nomatch\"}]\r\n            },\r\n            states: {\r\n                prompt: {\r\n                    entry: say('What would you like me to do?'),\r\n                    on: { ENDSPEECH: \"ask\" }\r\n                },\r\n                ask: {\r\n                    entry: listen()\r\n                },\r\n                nomatch: {\r\n                    entry: say('Sorry, I did not quite get you. Please repeat.'),\r\n                    on: { ENDSPEECH: \"ask\"}\r\n                }\r\n            }\r\n        },\r\n        action: {\r\n            initial: \"prompt\",\r\n            states: {\r\n                prompt: {\r\n                    entry: send((context) => ({\r\n                        type: \"SPEAK\",\r\n                        value: `Understood! I will now ${context.HouseCommand.action} the ${context.HouseCommand.object}.`})),\r\n                    on: {ENDSPEECH: \"#welcome_state\"}\r\n                }\r\n            }\r\n        }\r\n    }\r\n})"]},"metadata":{},"sourceType":"module"}