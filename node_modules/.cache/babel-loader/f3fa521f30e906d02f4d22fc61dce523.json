{"ast":null,"code":"import{send,assign}from\"xstate\";function say(text){return send(_context=>({type:\"SPEAK\",value:text}));}function listen(){return send('LISTEN');}const proxyurl=\"https://cors-anywhere.herokuapp.com/\";const rasaurl='https://rafalappointment.herokuapp.com/model/parse';const nluRequest=text=>fetch(new Request(proxyurl+rasaurl,{method:'POST',headers:{'Origin':'http://maraev.me'},// only required with proxy\nbody:\"{\\\"text\\\": \\\"\".concat(text,\"\\\"}\")})).then(data=>data.json());const grammar={\"John\":{person:\"John Appleseed\"},\"John Appleseed\":{person:\"John Appleseed\"},\"Jack\":{person:\"Jack Jackson\"},\"Jack Jackson\":{person:\"Jack Jackson\"},\"Liana\":{person:\"Liana Jelena\"},\"Liana Jelena\":{person:\"Liana Jelena\"},\"Natalie\":{person:\"Natalie Portman\"},\"Natalie Portman\":{person:\"Natalie Portman\"},\"Bruce\":{person:\"Bruce W\"},\"Bob\":{person:\"Bob the builder\"},\"Bob the builder\":{person:\"Bob the builder\"},\"Shrek\":{person:\"Shrek from the swamp\"},\"Shrek from the swap\":{person:\"Shrek\"},\"on Monday\":{day:\"Monday\"},\"Monday\":{day:\"Monday\"},\"on Tuesday\":{day:\"Tuesday\"},\"Tuesday\":{day:\"Tuesday\"},\"on Wednesday\":{day:\"Wednesday\"},\"Wednesday\":{day:\"Wednesday\"},\"on Thursday\":{day:\"Thursday\"},\"Thursday\":{day:\"Thursday\"},\"on Friday\":{day:\"Friday\"},\"Friday\":{day:\"Friday\"},\"on Satudary\":{day:\"Satuday\"},\"Satudary\":{day:\"Satuday\"},\"on Sunday\":{day:\"Sunday\"},\"Sunday\":{day:\"Sunday\"},\"10\":{time:\"10:00\"},\"at 10\":{time:\"10:00\"},\"ten\":{time:\"10:00\"},\"at ten\":{time:\"10:00\"},\"11\":{time:\"11:00\"},\"eleven\":{time:\"11:00\"},\"at 11\":{time:\"11:00\"},\"at eleven\":{time:\"11:00\"},\"12\":{time:\"12:00\"},\"twelve\":{time:\"12:00\"},\"at 12\":{time:\"12:00\"},\"at twelve\":{time:\"12:00\"},\"13\":{time:\"13:00\"},\"thirteen\":{time:\"13:00\"},\"at 13\":{time:\"13:00\"},\"at thirteen\":{time:\"13:00\"},\"14\":{time:\"14:00\"},\"fourteen\":{time:\"14:00\"},\"at 14\":{time:\"14:00\"},\"at fourteen\":{time:\"14:00\"},\"15\":{time:\"15:00\"},\"fifteen\":{time:\"15:00\"},\"at 15\":{time:\"15:00\"},\"at fifteen\":{time:\"15:00\"},\"16\":{time:\"16:00\"},\"sixteen\":{time:\"16:00\"},\"at 16\":{time:\"16:00\"},\"at sixteen\":{time:\"16:00\"},\"17\":{time:\"17:00\"},\"seventeen\":{time:\"17:00\"},\"at 17\":{time:\"17:00\"},\"at seventeen\":{time:\"17:00\"},\"18\":{time:\"18:00\"},\"eighteen\":{time:\"18:00\"},\"at 18\":{time:\"18:00\"},\"at eighteen\":{time:\"18:00\"},\"19\":{time:\"19:00\"},\"nineteen\":{time:\"19:00\"},\"at 19\":{time:\"19:00\"},\"at nineteen\":{time:\"19:00\"},\"20\":{time:\"20:00\"},\"twenty\":{time:\"20:00\"},\"at 20\":{time:\"20:00\"},\"at twenty\":{time:\"20:00\"}};const boolean_grammar={\"yes\":{agreement:Boolean(true)},\"of course\":{agreement:Boolean(true)},\"sure\":{agreement:Boolean(true)},\"absolutely\":{agreement:Boolean(true)},\"yes please\":{agreement:Boolean(true)},\"no\":{disagreement:Boolean(false)},\"no way\":{disagreement:Boolean(false)},\"absolutely not\":{disagreement:Boolean(false)},\"never\":{disagreement:Boolean(false)},\"maybe\":{uncertain:\"unsure\"},\"perhaps\":{uncertain:\"unsure\"},\"I don't know\":{uncertain:\"unsure\"},\"probably\":{uncertain:\"unsure\"}};export const dmMachine={initial:'start_point',states:{start_point:{on:{CLICK:'choice_of_tool'}},choice_of_tool:{id:'make_a_choice',initial:\"prompt\",on:{RECOGNISED:[{actions:assign(context=>{return{task:context.recResult};}),target:'choice'},{target:\".nomatch\"}]},states:{prompt:{entry:say(\"What would you like to do?\"),on:{ENDSPEECH:'ask'}},ask:{entry:listen()},nomatch:{entry:say(\"Sorry, I didn't quite get you. Could you please repeat?\"),on:{ENDSPEECH:'ask'}}}},choice:{invoke:{id:'rasaApi',src:(context,event)=>nluRequest(context.task),onDone:{target:'tool',actions:[assign((context,event)=>{return{intentResult:event.data.intent.name};}),(context,event)=>console.log(event.data)]},onError:{target:'choice_of_tool',actions:(context,event)=>console.log(event.data)}}},tool:{initial:'prompt',on:{ENDSPEECH:[{cond:context=>context.intentResult==='to_do_item',target:'to_do_item'},{cond:context=>context.intentResult==='appointment',target:'appointment'},{cond:context=>context.intentResult==='timer',target:'timer'},{target:'.nomatch'}]},states:{prompt:{entry:send(context=>({type:\"SPEAK\",value:\"Ok, let's see if I can help you with \".concat(context.task,\".\")}))},nomatch:{entry:say(\"Excuse me, I haven't yet learned such task. Let's try again.\"),on:{ENDSPEECH:'#make_a_choice'}}}},timer:{initial:'prompt',on:{ENDSPEECH:'choice_of_tool'},states:{prompt:{entry:say(\"Welcome to the timer tool! Sorry, this tool has not yet been developed.\")}}},to_do_item:{initial:'prompt',on:{ENDSPEECH:'choice_of_tool'},states:{prompt:{entry:say(\"Welcome to the to do item tool! Sorry, this tool has not yet been developed.\")}}},appointment:{initial:'prompt',on:{ENDSPEECH:'who'},states:{prompt:{entry:say(\"Welcome to the appointment tool! Let's create an appointment.\")}}},who:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"person\"in(grammar[context.recResult]||{}),actions:assign(context=>{return{person:grammar[context.recResult].person};}),target:\"day\"},{target:\".nomatch\"}]},states:{prompt:{entry:say(\"Who are you meeting with?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:listen()},nomatch:{entry:send(context=>({type:\"SPEAK\",value:\"Sorry, I don't know them. Please choose someone from your contacts list.\"})),on:{ENDSPEECH:\"ask\"}}}},day:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"day\"in(grammar[context.recResult]||{}),actions:assign(context=>{return{day:grammar[context.recResult].day};}),target:\"length\"},{target:\".nomatch\"}]},states:{prompt:{entry:send(context=>({type:\"SPEAK\",value:\"OK. \".concat(context.person,\". On which day is your meeting?\")})),on:{ENDSPEECH:\"ask\"}},ask:{entry:listen()},nomatch:{entry:say(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},length:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),target:\"whole_day\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),target:\"time\"},{cond:context=>\"uncertain\"in(boolean_grammar[context.recResult]||{}),target:\".specific\"},{target:\".nomatch\"}]},states:{prompt:{entry:say(\"Will it take the whole day?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:listen()},nomatch:{entry:say(\"Sorry, I did not understand you this time.\"),on:{ENDSPEECH:\"ask\"}},specific:{entry:say(\"please be more specific.\"),on:{ENDSPEECH:\"ask\"}}}},time:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"time\"in(grammar[context.recResult]||{}),actions:assign(context=>{return{time:grammar[context.recResult].time};}),target:\"repetition\"},{target:\".nomatch\"}]},states:{prompt:{entry:say(\"What time is your meeting?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:listen()},nomatch:{entry:say(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},whole_day:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),target:\"confirmation\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),target:\".canceled\"},{target:\".nomatch\"}]},states:{prompt:{entry:send(context=>({type:\"SPEAK\",value:\"Do you want me to create an appointment with \".concat(context.person,\" on \").concat(context.day,\" for the whole day?\")})),on:{ENDSPEECH:\"ask\"}},ask:{entry:listen()},canceled:{entry:say(\"The appointment has been canceled.\"),on:{ENDSPEECH:'#make_a_choice'}},nomatch:{entry:say(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},repetition:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),target:\"confirmation\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),target:\".canceled\"},{cond:context=>\"unsure\"in(boolean_grammar[context.recResult]||{}),target:\".specific\"},{target:\".nomatch\"}]},states:{prompt:{entry:send(context=>({type:\"SPEAK\",value:\"Do you want me to create an appointment with \".concat(context.person,\" on \").concat(context.day,\" at \").concat(context.time,\"?\")})),on:{ENDSPEECH:\"ask\"}},canceled:{entry:say(\"The appointment has been cancell\\ed.\"),on:{ENDSPEECH:'#make_a_choice'}},ask:{entry:listen()},specific:{entry:say(\"Please be more specific.\"),on:{ENDSPEECH:'ask'}},nomatch:{entry:say(\"Sorry, I don't understand. Please repeat\"),on:{ENDSPEECH:\"ask\"}}}},confirmation:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),target:\"to_do_item\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),target:\"#make_a_choice\"},{cond:context=>\"unsure\"in(boolean_grammar[context.recResult]||{}),target:\".specific\"},{target:\".nomatch\"}]},states:{prompt:{entry:say(\"Your appointment has been created! Would you like to add it to your to do list? \"),on:{ENDSPEECH:'ask'}},ask:{entry:listen()},nomatch:{entry:say(\"Sorry, I did not get you.\")},specific:{entry:say(\"Please be more specific\"),on:{ENDSPEECH:'ask'}}}}}};","map":{"version":3,"sources":["C:/Users/R/Desktop/DialogueSystems/Lab2/react-xstate-colourchanger/src/dmAppointment.ts"],"names":["send","assign","say","text","_context","type","value","listen","proxyurl","rasaurl","nluRequest","fetch","Request","method","headers","body","then","data","json","grammar","person","day","time","boolean_grammar","agreement","Boolean","disagreement","uncertain","dmMachine","initial","states","start_point","on","CLICK","choice_of_tool","id","RECOGNISED","actions","context","task","recResult","target","prompt","entry","ENDSPEECH","ask","nomatch","choice","invoke","src","event","onDone","intentResult","intent","name","console","log","onError","tool","cond","timer","to_do_item","appointment","who","length","specific","whole_day","canceled","repetition","confirmation"],"mappings":"AAAA,OAAwBA,IAAxB,CAAsCC,MAAtC,KAAoD,QAApD,CAGA,QAASC,CAAAA,GAAT,CAAaC,IAAb,CAAyD,CACrD,MAAOH,CAAAA,IAAI,CAAEI,QAAD,GAA2B,CAAEC,IAAI,CAAE,OAAR,CAAiBC,KAAK,CAAEH,IAAxB,CAA3B,CAAD,CAAX,CACH,CAED,QAASI,CAAAA,MAAT,EAAgD,CAC5C,MAAOP,CAAAA,IAAI,CAAC,QAAD,CAAX,CACH,CAGD,KAAMQ,CAAAA,QAAQ,CAAG,sCAAjB,CACA,KAAMC,CAAAA,OAAO,CAAG,oDAAhB,CACA,KAAMC,CAAAA,UAAU,CAAIP,IAAD,EACfQ,KAAK,CAAC,GAAIC,CAAAA,OAAJ,CAAYJ,QAAQ,CAAGC,OAAvB,CAAgC,CAClCI,MAAM,CAAE,MAD0B,CAElCC,OAAO,CAAE,CAAE,SAAU,kBAAZ,CAFyB,CAES;AAC3CC,IAAI,wBAAeZ,IAAf,OAH8B,CAAhC,CAAD,CAAL,CAKKa,IALL,CAKUC,IAAI,EAAIA,IAAI,CAACC,IAAL,EALlB,CADJ,CAQA,KAAMC,CAAAA,OAA8E,CAAG,CACnF,OAAQ,CAAEC,MAAM,CAAE,gBAAV,CAD2E,CAEnF,iBAAkB,CAAEA,MAAM,CAAE,gBAAV,CAFiE,CAGnF,OAAQ,CAAEA,MAAM,CAAE,cAAV,CAH2E,CAInF,eAAgB,CAAEA,MAAM,CAAE,cAAV,CAJmE,CAKnF,QAAS,CAAEA,MAAM,CAAE,cAAV,CAL0E,CAMnF,eAAgB,CAAEA,MAAM,CAAE,cAAV,CANmE,CAOnF,UAAW,CAAEA,MAAM,CAAE,iBAAV,CAPwE,CAQnF,kBAAmB,CAAEA,MAAM,CAAE,iBAAV,CARgE,CASnF,QAAS,CAAEA,MAAM,CAAE,SAAV,CAT0E,CAUnF,MAAO,CAAEA,MAAM,CAAE,iBAAV,CAV4E,CAWnF,kBAAmB,CAAEA,MAAM,CAAE,iBAAV,CAXgE,CAYnF,QAAS,CAAEA,MAAM,CAAE,sBAAV,CAZ0E,CAanF,sBAAuB,CAAEA,MAAM,CAAE,OAAV,CAb4D,CAenF,YAAa,CAACC,GAAG,CAAE,QAAN,CAfsE,CAgBnF,SAAU,CAACA,GAAG,CAAE,QAAN,CAhByE,CAiBnF,aAAc,CAACA,GAAG,CAAE,SAAN,CAjBqE,CAkBnF,UAAW,CAACA,GAAG,CAAE,SAAN,CAlBwE,CAmBnF,eAAgB,CAACA,GAAG,CAAE,WAAN,CAnBmE,CAoBnF,YAAa,CAACA,GAAG,CAAE,WAAN,CApBsE,CAqBnF,cAAe,CAACA,GAAG,CAAE,UAAN,CArBoE,CAsBnF,WAAY,CAACA,GAAG,CAAE,UAAN,CAtBuE,CAuBnF,YAAa,CAACA,GAAG,CAAE,QAAN,CAvBsE,CAwBnF,SAAU,CAACA,GAAG,CAAE,QAAN,CAxByE,CAyBnF,cAAe,CAACA,GAAG,CAAE,SAAN,CAzBoE,CA0BnF,WAAY,CAACA,GAAG,CAAE,SAAN,CA1BuE,CA2BnF,YAAa,CAACA,GAAG,CAAE,QAAN,CA3BsE,CA4BnF,SAAU,CAACA,GAAG,CAAE,QAAN,CA5ByE,CA8BnF,KAAM,CAAEC,IAAI,CAAE,OAAR,CA9B6E,CA+BnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CA/B0E,CAgCnF,MAAO,CAAEA,IAAI,CAAE,OAAR,CAhC4E,CAiCnF,SAAU,CAAEA,IAAI,CAAE,OAAR,CAjCyE,CAkCnF,KAAM,CAAEA,IAAI,CAAE,OAAR,CAlC6E,CAmCnF,SAAU,CAAEA,IAAI,CAAE,OAAR,CAnCyE,CAoCnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CApC0E,CAqCnF,YAAa,CAAEA,IAAI,CAAE,OAAR,CArCsE,CAsCnF,KAAM,CAAEA,IAAI,CAAE,OAAR,CAtC6E,CAuCnF,SAAU,CAAEA,IAAI,CAAE,OAAR,CAvCyE,CAwCnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CAxC0E,CAyCnF,YAAa,CAAEA,IAAI,CAAE,OAAR,CAzCsE,CA0CnF,KAAM,CAAEA,IAAI,CAAE,OAAR,CA1C6E,CA2CnF,WAAY,CAAEA,IAAI,CAAE,OAAR,CA3CuE,CA4CnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CA5C0E,CA6CnF,cAAe,CAAEA,IAAI,CAAE,OAAR,CA7CoE,CA8CnF,KAAM,CAAEA,IAAI,CAAE,OAAR,CA9C6E,CA+CnF,WAAY,CAAEA,IAAI,CAAE,OAAR,CA/CuE,CAgDnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CAhD0E,CAiDnF,cAAe,CAAEA,IAAI,CAAE,OAAR,CAjDoE,CAkDnF,KAAM,CAAEA,IAAI,CAAE,OAAR,CAlD6E,CAmDnF,UAAW,CAAEA,IAAI,CAAE,OAAR,CAnDwE,CAoDnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CApD0E,CAqDnF,aAAc,CAAEA,IAAI,CAAE,OAAR,CArDqE,CAsDnF,KAAM,CAAEA,IAAI,CAAE,OAAR,CAtD6E,CAuDnF,UAAW,CAAEA,IAAI,CAAE,OAAR,CAvDwE,CAwDnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CAxD0E,CAyDnF,aAAc,CAAEA,IAAI,CAAE,OAAR,CAzDqE,CA0DnF,KAAM,CAAEA,IAAI,CAAE,OAAR,CA1D6E,CA2DnF,YAAa,CAAEA,IAAI,CAAE,OAAR,CA3DsE,CA4DnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CA5D0E,CA6DnF,eAAgB,CAAEA,IAAI,CAAE,OAAR,CA7DmE,CA8DnF,KAAM,CAAEA,IAAI,CAAE,OAAR,CA9D6E,CA+DnF,WAAY,CAAEA,IAAI,CAAE,OAAR,CA/DuE,CAgEnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CAhE0E,CAiEnF,cAAe,CAAEA,IAAI,CAAE,OAAR,CAjEoE,CAkEnF,KAAM,CAAEA,IAAI,CAAE,OAAR,CAlE6E,CAmEnF,WAAY,CAAEA,IAAI,CAAE,OAAR,CAnEuE,CAoEnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CApE0E,CAqEnF,cAAe,CAAEA,IAAI,CAAE,OAAR,CArEoE,CAsEnF,KAAM,CAAEA,IAAI,CAAE,OAAR,CAtE6E,CAuEnF,SAAU,CAAEA,IAAI,CAAE,OAAR,CAvEyE,CAwEnF,QAAS,CAAEA,IAAI,CAAE,OAAR,CAxE0E,CAyEnF,YAAa,CAAEA,IAAI,CAAE,OAAR,CAzEsE,CAAvF,CA6EA,KAAMC,CAAAA,eAAqG,CAAG,CAC1G,MAAO,CAACC,SAAS,CAAEC,OAAO,CAAC,IAAD,CAAnB,CADmG,CAE1G,YAAa,CAACD,SAAS,CAAEC,OAAO,CAAC,IAAD,CAAnB,CAF6F,CAG1G,OAAQ,CAACD,SAAS,CAAEC,OAAO,CAAC,IAAD,CAAnB,CAHkG,CAI1G,aAAc,CAACD,SAAS,CAAEC,OAAO,CAAC,IAAD,CAAnB,CAJ4F,CAK1G,aAAc,CAACD,SAAS,CAAEC,OAAO,CAAC,IAAD,CAAnB,CAL4F,CAM1G,KAAM,CAACC,YAAY,CAAED,OAAO,CAAC,KAAD,CAAtB,CANoG,CAO1G,SAAU,CAACC,YAAY,CAAED,OAAO,CAAC,KAAD,CAAtB,CAPgG,CAQ1G,iBAAkB,CAACC,YAAY,CAAED,OAAO,CAAC,KAAD,CAAtB,CARwF,CAS1G,QAAS,CAACC,YAAY,CAAED,OAAO,CAAC,KAAD,CAAtB,CATiG,CAU1G,QAAS,CAACE,SAAS,CAAE,QAAZ,CAViG,CAW1G,UAAW,CAACA,SAAS,CAAE,QAAZ,CAX+F,CAY1G,eAAgB,CAACA,SAAS,CAAE,QAAZ,CAZ0F,CAa1G,WAAY,CAACA,SAAS,CAAE,QAAZ,CAb8F,CAA9G,CAgBA,MAAO,MAAMC,CAAAA,SAAmD,CAAI,CAEhEC,OAAO,CAAE,aAFuD,CAGhEC,MAAM,CAAE,CACJC,WAAW,CAAC,CACRC,EAAE,CAAE,CACAC,KAAK,CAAE,gBADP,CADI,CADR,CAMJC,cAAc,CAAC,CACXC,EAAE,CAAE,eADO,CAEXN,OAAO,CAAE,QAFE,CAGXG,EAAE,CAAE,CACAI,UAAU,CAAC,CAAC,CACRC,OAAO,CAAEpC,MAAM,CAAEqC,OAAD,EAAa,CAAE,MAAO,CAAEC,IAAI,CAAED,OAAO,CAACE,SAAhB,CAAP,CAAoC,CAApD,CADP,CAERC,MAAM,CAAE,QAFA,CAAD,CAIX,CAACA,MAAM,CAAE,UAAT,CAJW,CADX,CAHO,CAUXX,MAAM,CAAC,CACHY,MAAM,CAAE,CAAEC,KAAK,CAAEzC,GAAG,CAAC,4BAAD,CAAZ,CACA8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CADJ,CADL,CAIHC,GAAG,CAAE,CACDF,KAAK,CAAEpC,MAAM,EADZ,CAJF,CAOHuC,OAAO,CAAE,CAAEH,KAAK,CAAEzC,GAAG,CAAC,yDAAD,CAAZ,CACT8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CADK,CAPN,CAVI,CANX,CA2BJG,MAAM,CAAC,CACHC,MAAM,CAAE,CACJb,EAAE,CAAE,SADA,CAEJc,GAAG,CAAE,CAACX,OAAD,CAAUY,KAAV,GAAqBxC,UAAU,CAAC4B,OAAO,CAACC,IAAT,CAFhC,CAGJY,MAAM,CAAC,CACHV,MAAM,CAAE,MADL,CAEHJ,OAAO,CAAC,CACJpC,MAAM,CAAC,CAACqC,OAAD,CAAUY,KAAV,GAAoB,CAAE,MAAO,CAAEE,YAAY,CAAEF,KAAK,CAACjC,IAAN,CAAWoC,MAAX,CAAkBC,IAAlC,CAAP,CAAgD,CAAvE,CADF,CAEJ,CAAChB,OAAD,CAAqBY,KAArB,GAAmCK,OAAO,CAACC,GAAR,CAAYN,KAAK,CAACjC,IAAlB,CAF/B,CAFL,CAHH,CASJwC,OAAO,CAAC,CACJhB,MAAM,CAAE,gBADJ,CAEJJ,OAAO,CAAE,CAACC,OAAD,CAAUY,KAAV,GAAoBK,OAAO,CAACC,GAAR,CAAYN,KAAK,CAACjC,IAAlB,CAFzB,CATJ,CADL,CA3BH,CA8CJyC,IAAI,CAAC,CACD7B,OAAO,CAAE,QADR,CAEDG,EAAE,CAAC,CACCY,SAAS,CAAC,CAAC,CACPe,IAAI,CAAGrB,OAAD,EAAaA,OAAO,CAACc,YAAR,GAAyB,YADrC,CAEPX,MAAM,CAAE,YAFD,CAAD,CAGN,CAACkB,IAAI,CAAGrB,OAAD,EAAaA,OAAO,CAACc,YAAR,GAAyB,aAA7C,CACAX,MAAM,CAAE,aADR,CAHM,CAKN,CAACkB,IAAI,CAAGrB,OAAD,EAAaA,OAAO,CAACc,YAAR,GAAyB,OAA7C,CACAX,MAAM,CAAE,OADR,CALM,CAOV,CAACA,MAAM,CAAC,UAAR,CAPU,CADX,CAFF,CAYDX,MAAM,CAAE,CACJY,MAAM,CAAE,CACJC,KAAK,CAAE3C,IAAI,CAAEsC,OAAD,GAAc,CACtBjC,IAAI,CAAE,OADgB,CAEtBC,KAAK,gDAA0CgC,OAAO,CAACC,IAAlD,KAFiB,CAAd,CAAD,CADP,CADJ,CAKJO,OAAO,CAAE,CACLH,KAAK,CAAEzC,GAAG,CAAC,8DAAD,CADL,CAEL8B,EAAE,CAAE,CAACY,SAAS,CAAE,gBAAZ,CAFC,CALL,CAZP,CA9CD,CAwEJgB,KAAK,CAAE,CACH/B,OAAO,CAAE,QADN,CAEHG,EAAE,CAAE,CAACY,SAAS,CAAE,gBAAZ,CAFD,CAGHd,MAAM,CAAC,CACHY,MAAM,CAAC,CACHC,KAAK,CAAEzC,GAAG,CAAC,yEAAD,CADP,CADJ,CAHJ,CAxEH,CAiFJ2D,UAAU,CAAE,CACRhC,OAAO,CAAE,QADD,CAERG,EAAE,CAAE,CAACY,SAAS,CAAE,gBAAZ,CAFI,CAGRd,MAAM,CAAC,CACHY,MAAM,CAAC,CACHC,KAAK,CAAEzC,GAAG,CAAC,8EAAD,CADP,CADJ,CAHC,CAjFR,CA0FJ4D,WAAW,CAAC,CACRjC,OAAO,CAAE,QADD,CAERG,EAAE,CAAC,CAAEY,SAAS,CAAE,KAAb,CAFK,CAIRd,MAAM,CAAC,CACHY,MAAM,CAAC,CACHC,KAAK,CAAEzC,GAAG,CAAC,+DAAD,CADP,CADJ,CAJC,CA1FR,CAoGA6D,GAAG,CAAE,CACDlC,OAAO,CAAE,QADR,CAEDG,EAAE,CAAE,CACAI,UAAU,CAAE,CAAC,CACTuB,IAAI,CAAGrB,OAAD,EAAa,WAAanB,OAAO,CAACmB,OAAO,CAACE,SAAT,CAAP,EAA8B,EAA3C,CADV,CAETH,OAAO,CAAEpC,MAAM,CAAEqC,OAAD,EAAa,CAAE,MAAO,CAAElB,MAAM,CAAED,OAAO,CAACmB,OAAO,CAACE,SAAT,CAAP,CAA2BpB,MAArC,CAAP,CAAsD,CAAtE,CAFN,CAGTqB,MAAM,CAAE,KAHC,CAAD,CAKZ,CAAEA,MAAM,CAAE,UAAV,CALY,CADZ,CAFH,CAUDX,MAAM,CAAE,CACJY,MAAM,CAAE,CACJC,KAAK,CAAEzC,GAAG,CAAC,2BAAD,CADN,CAEJ8B,EAAE,CAAE,CAAEY,SAAS,CAAE,KAAb,CAFA,CADJ,CAKJC,GAAG,CAAE,CACDF,KAAK,CAAEpC,MAAM,EADZ,CALD,CAQJuC,OAAO,CAAE,CAAEH,KAAK,CAAE3C,IAAI,CAAEsC,OAAD,GAAc,CAC7BjC,IAAI,CAAE,OADuB,CAE7BC,KAAK,2EAFwB,CAAd,CAAD,CAAb,CAGD0B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAHH,CARL,CAVP,CApGL,CA6HAvB,GAAG,CAAE,CACDQ,OAAO,CAAE,QADR,CAEDG,EAAE,CAAE,CACAI,UAAU,CAAE,CAAC,CACTuB,IAAI,CAAGrB,OAAD,EAAa,QAAUnB,OAAO,CAACmB,OAAO,CAACE,SAAT,CAAP,EAA8B,EAAxC,CADV,CAETH,OAAO,CAAEpC,MAAM,CAAEqC,OAAD,EAAa,CAAC,MAAM,CAAEjB,GAAG,CAAEF,OAAO,CAACmB,OAAO,CAACE,SAAT,CAAP,CAA2BnB,GAAlC,CAAN,CAA6C,CAA5D,CAFN,CAGToB,MAAM,CAAE,QAHC,CAAD,CAKZ,CAACA,MAAM,CAAE,UAAT,CALY,CADZ,CAFH,CAUDX,MAAM,CAAE,CACJY,MAAM,CAAE,CACJC,KAAK,CAAE3C,IAAI,CAAEsC,OAAD,GAAc,CACtBjC,IAAI,CAAE,OADgB,CAEtBC,KAAK,eAASgC,OAAO,CAAClB,MAAjB,mCAFiB,CAAd,CAAD,CADP,CAIJY,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAJA,CADJ,CAOJC,GAAG,CAAE,CACDF,KAAK,CAAEpC,MAAM,EADZ,CAPD,CAUJuC,OAAO,CAAE,CACLH,KAAK,CAAEzC,GAAG,CAAC,0CAAD,CADL,CAEL8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFC,CAVL,CAVP,CA7HL,CAuJAoB,MAAM,CAAE,CACJnC,OAAO,CAAE,QADL,CAEJG,EAAE,CAAE,CACAI,UAAU,CAAE,CAAC,CACTuB,IAAI,CAAGrB,OAAD,EAAa,cAAgBf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAtD,CADV,CAETC,MAAM,CAAE,WAFC,CAAD,CAIR,CAACkB,IAAI,CAAGrB,OAAD,EAAa,iBAAmBf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAzD,CAApB,CACAC,MAAM,CAAE,MADR,CAJQ,CAOR,CAACkB,IAAI,CAAGrB,OAAD,EAAa,cAAgBf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAtD,CAApB,CACAC,MAAM,CAAE,WADR,CAPQ,CAUZ,CAACA,MAAM,CAAC,UAAR,CAVY,CADZ,CAFA,CAgBJX,MAAM,CAAE,CACJY,MAAM,CAAE,CACJC,KAAK,CAAEzC,GAAG,CAAC,6BAAD,CADN,CAEJ8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFA,CADJ,CAKJC,GAAG,CAAE,CACDF,KAAK,CAAEpC,MAAM,EADZ,CALD,CAQJuC,OAAO,CAAE,CACLH,KAAK,CAAEzC,GAAG,CAAC,4CAAD,CADL,CAET8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFK,CARL,CAYJqB,QAAQ,CAAE,CACNtB,KAAK,CAAEzC,GAAG,CAAC,0BAAD,CADJ,CAEV8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFM,CAZN,CAhBJ,CAvJR,CAyLAtB,IAAI,CAAE,CACFO,OAAO,CAAE,QADP,CAEFG,EAAE,CAAE,CACAI,UAAU,CAAE,CAAC,CACTuB,IAAI,CAAGrB,OAAD,EAAa,SAAWnB,OAAO,CAACmB,OAAO,CAACE,SAAT,CAAP,EAA8B,EAAzC,CADV,CAETH,OAAO,CAAEpC,MAAM,CAAEqC,OAAD,EAAa,CAAC,MAAM,CAAEhB,IAAI,CAAEH,OAAO,CAACmB,OAAO,CAACE,SAAT,CAAP,CAA2BlB,IAAnC,CAAN,CAA+C,CAA9D,CAFN,CAGTmB,MAAM,CAAE,YAHC,CAAD,CAKZ,CACAA,MAAM,CAAE,UADR,CALY,CADZ,CAFF,CAYFX,MAAM,CAAE,CACJY,MAAM,CAAE,CACJC,KAAK,CAAEzC,GAAG,CAAC,4BAAD,CADN,CAEJ8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFA,CADJ,CAKJC,GAAG,CAAE,CACDF,KAAK,CAAEpC,MAAM,EADZ,CALD,CAQJuC,OAAO,CAAE,CACLH,KAAK,CAAEzC,GAAG,CAAC,0CAAD,CADL,CAEL8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFC,CARL,CAZN,CAzLN,CAkNAsB,SAAS,CAAE,CACPrC,OAAO,CAAE,QADF,CAEPG,EAAE,CAAE,CACAI,UAAU,CAAE,CAAC,CACTuB,IAAI,CAAGrB,OAAD,EAAa,cAAgBf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAtD,CADV,CAETC,MAAM,CAAE,cAFC,CAAD,CAGR,CACAkB,IAAI,CAAGrB,OAAD,EAAa,iBAAmBf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAzD,CADnB,CAEAC,MAAM,CAAE,WAFR,CAHQ,CAOZ,CAACA,MAAM,CAAE,UAAT,CAPY,CADZ,CAFG,CAYPX,MAAM,CAAC,CACHY,MAAM,CAAC,CACHC,KAAK,CAAE3C,IAAI,CAAEsC,OAAD,GAAc,CACtBjC,IAAI,CAAE,OADgB,CAEtBC,KAAK,wDAAiDgC,OAAO,CAAClB,MAAzD,gBAAsEkB,OAAO,CAACjB,GAA9E,uBAFiB,CAAd,CAAD,CADR,CAIHW,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAJD,CADJ,CAQHC,GAAG,CAAE,CACDF,KAAK,CAAEpC,MAAM,EADZ,CARF,CAWH4D,QAAQ,CAAE,CACNxB,KAAK,CAAEzC,GAAG,CAAC,oCAAD,CADJ,CAEN8B,EAAE,CAAE,CAACY,SAAS,CAAE,gBAAZ,CAFE,CAXP,CAgBHE,OAAO,CAAE,CACLH,KAAK,CAAEzC,GAAG,CAAC,0CAAD,CADL,CAEL8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFC,CAhBN,CAZA,CAlNX,CAmPAwB,UAAU,CAAE,CACRvC,OAAO,CAAE,QADD,CAERG,EAAE,CAAE,CACAI,UAAU,CAAE,CAAC,CACTuB,IAAI,CAAGrB,OAAD,EAAa,cAAgBf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAtD,CADV,CAETC,MAAM,CAAE,cAFC,CAAD,CAGR,CACAkB,IAAI,CAAGrB,OAAD,EAAa,iBAAmBf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAzD,CADnB,CAEAC,MAAM,CAAE,WAFR,CAHQ,CAMR,CAACkB,IAAI,CAAGrB,OAAD,EAAa,WAAaf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAnD,CAApB,CACAC,MAAM,CAAE,WADR,CANQ,CAQZ,CAACA,MAAM,CAAE,UAAT,CARY,CADZ,CAFI,CAaRX,MAAM,CAAC,CACHY,MAAM,CAAC,CACHC,KAAK,CAAE3C,IAAI,CAAEsC,OAAD,GAAc,CACtBjC,IAAI,CAAE,OADgB,CAEtBC,KAAK,wDAAiDgC,OAAO,CAAClB,MAAzD,gBAAsEkB,OAAO,CAACjB,GAA9E,gBAAwFiB,OAAO,CAAChB,IAAhG,KAFiB,CAAd,CAAD,CADR,CAICU,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAJL,CADJ,CAOHuB,QAAQ,CAAE,CACNxB,KAAK,CAAEzC,GAAG,CAAC,sCAAD,CADJ,CAEN8B,EAAE,CAAE,CAACY,SAAS,CAAE,gBAAZ,CAFE,CAPP,CAWHC,GAAG,CAAE,CACDF,KAAK,CAAEpC,MAAM,EADZ,CAXF,CAcH0D,QAAQ,CAAC,CACLtB,KAAK,CAAEzC,GAAG,CAAC,0BAAD,CADL,CAEL8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFC,CAdN,CAkBHE,OAAO,CAAE,CACLH,KAAK,CAAEzC,GAAG,CAAC,0CAAD,CADL,CAEL8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFC,CAlBN,CAbC,CAnPZ,CAsRAyB,YAAY,CAAE,CACVxC,OAAO,CAAE,QADC,CAEVG,EAAE,CAAE,CACCI,UAAU,CAAE,CAAC,CACVuB,IAAI,CAAGrB,OAAD,EAAa,cAAgBf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAtD,CADT,CAEVC,MAAM,CAAE,YAFE,CAAD,CAGT,CACAkB,IAAI,CAAGrB,OAAD,EAAa,iBAAmBf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAzD,CADnB,CAEAC,MAAM,CAAE,gBAFR,CAHS,CAMT,CACAkB,IAAI,CAAGrB,OAAD,EAAa,WAAaf,eAAe,CAACe,OAAO,CAACE,SAAT,CAAf,EAAsC,EAAnD,CADnB,CAEAC,MAAM,CAAE,WAFR,CANS,CAUb,CAACA,MAAM,CAAE,UAAT,CAVa,CADb,CAFM,CAeVX,MAAM,CAAE,CACJY,MAAM,CAAE,CACJC,KAAK,CAAEzC,GAAG,CAAC,kFAAD,CADN,CAEJ8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFA,CADJ,CAKJC,GAAG,CAAE,CAACF,KAAK,CAAEpC,MAAM,EAAd,CALD,CAOJuC,OAAO,CAAC,CACJH,KAAK,CAAEzC,GAAG,CAAC,2BAAD,CADN,CAPJ,CAUJ+D,QAAQ,CAAC,CACLtB,KAAK,CAAEzC,GAAG,CAAC,yBAAD,CADL,CAEL8B,EAAE,CAAE,CAACY,SAAS,CAAE,KAAZ,CAFC,CAVL,CAfE,CAtRd,CAHwD,CAA7D","sourcesContent":["import { MachineConfig, send, Action, assign } from \"xstate\";\r\n\r\n\r\nfunction say(text: string): Action<SDSContext, SDSEvent> {\r\n    return send((_context: SDSContext) => ({ type: \"SPEAK\", value: text }))\r\n}\r\n\r\nfunction listen(): Action<SDSContext, SDSEvent> {\r\n    return send('LISTEN')\r\n}\r\n\r\n\r\nconst proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\nconst rasaurl = 'https://rafalappointment.herokuapp.com/model/parse'\r\nconst nluRequest = (text: string) =>\r\n    fetch(new Request(proxyurl + rasaurl, {\r\n        method: 'POST',\r\n        headers: { 'Origin': 'http://maraev.me' }, // only required with proxy\r\n        body: `{\"text\": \"${text}\"}`\r\n    }))\r\n        .then(data => data.json()); \r\n\r\nconst grammar: { [index: string]: { person?: string, day?: string, time?: string } } = {\r\n    \"John\": { person: \"John Appleseed\" },\r\n    \"John Appleseed\": { person: \"John Appleseed\" },\r\n    \"Jack\": { person: \"Jack Jackson\" },\r\n    \"Jack Jackson\": { person: \"Jack Jackson\" },\r\n    \"Liana\": { person: \"Liana Jelena\" },\r\n    \"Liana Jelena\": { person: \"Liana Jelena\" },\r\n    \"Natalie\": { person: \"Natalie Portman\" },\r\n    \"Natalie Portman\": { person: \"Natalie Portman\" },\r\n    \"Bruce\": { person: \"Bruce W\" },\r\n    \"Bob\": { person: \"Bob the builder\" },\r\n    \"Bob the builder\": { person: \"Bob the builder\" },\r\n    \"Shrek\": { person: \"Shrek from the swamp\" },\r\n    \"Shrek from the swap\": { person: \"Shrek\" },\r\n\r\n    \"on Monday\": {day: \"Monday\" },\r\n    \"Monday\": {day: \"Monday\" },\r\n    \"on Tuesday\": {day: \"Tuesday\" },\r\n    \"Tuesday\": {day: \"Tuesday\" },\r\n    \"on Wednesday\": {day: \"Wednesday\" },\r\n    \"Wednesday\": {day: \"Wednesday\" },\r\n    \"on Thursday\": {day: \"Thursday\" },\r\n    \"Thursday\": {day: \"Thursday\" },\r\n    \"on Friday\": {day: \"Friday\" },\r\n    \"Friday\": {day: \"Friday\" },\r\n    \"on Satudary\": {day: \"Satuday\" },\r\n    \"Satudary\": {day: \"Satuday\" },\r\n    \"on Sunday\": {day: \"Sunday\" },\r\n    \"Sunday\": {day: \"Sunday\" },\r\n\r\n    \"10\": { time: \"10:00\" },\r\n    \"at 10\": { time: \"10:00\" },\r\n    \"ten\": { time: \"10:00\" },\r\n    \"at ten\": { time: \"10:00\" },\r\n    \"11\": { time: \"11:00\" },\r\n    \"eleven\": { time: \"11:00\" },\r\n    \"at 11\": { time: \"11:00\" },\r\n    \"at eleven\": { time: \"11:00\" },\r\n    \"12\": { time: \"12:00\" },\r\n    \"twelve\": { time: \"12:00\" },\r\n    \"at 12\": { time: \"12:00\" },\r\n    \"at twelve\": { time: \"12:00\" },\r\n    \"13\": { time: \"13:00\" },\r\n    \"thirteen\": { time: \"13:00\" },\r\n    \"at 13\": { time: \"13:00\" },\r\n    \"at thirteen\": { time: \"13:00\" },\r\n    \"14\": { time: \"14:00\" },\r\n    \"fourteen\": { time: \"14:00\" },\r\n    \"at 14\": { time: \"14:00\" },\r\n    \"at fourteen\": { time: \"14:00\" },\r\n    \"15\": { time: \"15:00\" },\r\n    \"fifteen\": { time: \"15:00\" },\r\n    \"at 15\": { time: \"15:00\" },\r\n    \"at fifteen\": { time: \"15:00\" },\r\n    \"16\": { time: \"16:00\" },\r\n    \"sixteen\": { time: \"16:00\" },\r\n    \"at 16\": { time: \"16:00\" },\r\n    \"at sixteen\": { time: \"16:00\" },\r\n    \"17\": { time: \"17:00\" },\r\n    \"seventeen\": { time: \"17:00\" },\r\n    \"at 17\": { time: \"17:00\" },\r\n    \"at seventeen\": { time: \"17:00\" },\r\n    \"18\": { time: \"18:00\" },\r\n    \"eighteen\": { time: \"18:00\" },\r\n    \"at 18\": { time: \"18:00\" },\r\n    \"at eighteen\": { time: \"18:00\" },\r\n    \"19\": { time: \"19:00\" },\r\n    \"nineteen\": { time: \"19:00\" },\r\n    \"at 19\": { time: \"19:00\" },\r\n    \"at nineteen\": { time: \"19:00\" },\r\n    \"20\": { time: \"20:00\" },\r\n    \"twenty\": { time: \"20:00\" },\r\n    \"at 20\": { time: \"20:00\" },\r\n    \"at twenty\": { time: \"20:00\" },\r\n\r\n}\r\n\r\nconst boolean_grammar: {[index: string]: {agreement?: boolean, disagreement?: boolean, uncertain?: string}} = {\r\n    \"yes\": {agreement: Boolean(true)},\r\n    \"of course\": {agreement: Boolean(true)},\r\n    \"sure\": {agreement: Boolean(true)},\r\n    \"absolutely\": {agreement: Boolean(true)},\r\n    \"yes please\": {agreement: Boolean(true)},\r\n    \"no\": {disagreement: Boolean(false)},\r\n    \"no way\": {disagreement: Boolean(false)},\r\n    \"absolutely not\": {disagreement: Boolean(false)},\r\n    \"never\": {disagreement: Boolean(false)},\r\n    \"maybe\": {uncertain: \"unsure\"},\r\n    \"perhaps\": {uncertain: \"unsure\"},\r\n    \"I don't know\": {uncertain: \"unsure\"},\r\n    \"probably\": {uncertain: \"unsure\"},\r\n}\r\n\r\nexport const dmMachine: MachineConfig<SDSContext, any, SDSEvent> = ({\r\n    \r\n    initial: 'start_point',\r\n    states: {\r\n        start_point:{\r\n            on: {\r\n                CLICK: 'choice_of_tool'\r\n            }\r\n        },\r\n        choice_of_tool:{\r\n            id: 'make_a_choice',\r\n            initial: \"prompt\",\r\n            on: {\r\n                RECOGNISED:[{\r\n                    actions: assign((context) => { return { task: context.recResult } }),\r\n                    target: 'choice'},\r\n                \r\n                {target: \".nomatch\"}]\r\n            },\r\n            states:{\r\n                prompt: { entry: say(\"What would you like to do?\"),\r\n                        on: {ENDSPEECH: 'ask'}\r\n                },\r\n                ask: {\r\n                    entry: listen()\r\n                },\r\n                nomatch: { entry: say(\"Sorry, I didn't quite get you. Could you please repeat?\"),\r\n                on: {ENDSPEECH: 'ask'}}\r\n            }\r\n        },\r\n        choice:{\r\n            invoke: {\r\n                id: 'rasaApi',\r\n                src: (context, event) =>  nluRequest(context.task),\r\n                onDone:{\r\n                    target: 'tool',\r\n                    actions:[\r\n                        assign((context, event) => { return { intentResult: event.data.intent.name} }),\r\n                        (context:SDSContext, event:any) => console.log(event.data)]\r\n                },\r\n                onError:{\r\n                    target: 'choice_of_tool',\r\n                    actions: (context, event) => console.log(event.data)\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n        tool:{\r\n            initial: 'prompt',\r\n            on:{\r\n                ENDSPEECH:[{\r\n                    cond: (context) => context.intentResult === 'to_do_item',\r\n                    target: 'to_do_item'},\r\n                    {cond: (context) => context.intentResult === 'appointment',\r\n                    target: 'appointment'},\r\n                    {cond: (context) => context.intentResult === 'timer',\r\n                    target: 'timer'},\r\n                {target:'.nomatch'}]\r\n            },\r\n            states: {\r\n                prompt: {\r\n                    entry: send((context) => ({\r\n                        type: \"SPEAK\",\r\n                        value: `Ok, let's see if I can help you with ${context.task}.`}))},\r\n                nomatch: {\r\n                    entry: say(\"Excuse me, I haven't yet learned such task. Let's try again.\"),\r\n                    on: {ENDSPEECH: '#make_a_choice'}\r\n                        \r\n                    }\r\n                        \r\n                }\r\n\r\n        },\r\n        timer: {\r\n            initial: 'prompt',\r\n            on: {ENDSPEECH: 'choice_of_tool'},\r\n            states:{\r\n                prompt:{\r\n                    entry: say(\"Welcome to the timer tool! Sorry, this tool has not yet been developed.\")\r\n                }\r\n            }\r\n        },\r\n        to_do_item: {\r\n            initial: 'prompt',\r\n            on: {ENDSPEECH: 'choice_of_tool'},\r\n            states:{\r\n                prompt:{\r\n                    entry: say(\"Welcome to the to do item tool! Sorry, this tool has not yet been developed.\")\r\n                }\r\n            }\r\n        },\r\n        appointment:{\r\n            initial: 'prompt',\r\n            on:{ ENDSPEECH: 'who'\r\n            },\r\n            states:{\r\n                prompt:{\r\n                    entry: say(\"Welcome to the appointment tool! Let's create an appointment.\")\r\n                }\r\n            }\r\n        },\r\n            who: {\r\n                initial: \"prompt\",\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"person\" in (grammar[context.recResult] || {}),\r\n                        actions: assign((context) => { return { person: grammar[context.recResult].person } }),\r\n                        target: \"day\"},\r\n    \r\n                    { target: \".nomatch\" }]\r\n                },\r\n                states: {\r\n                    prompt: {\r\n                        entry: say(\"Who are you meeting with?\"),\r\n                        on: { ENDSPEECH: \"ask\" }\r\n                    },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    nomatch: { entry: send((context) => ({\r\n                            type: \"SPEAK\",\r\n                            value: `Sorry, I don't know them. Please choose someone from your contacts list.`})),\r\n                            on: {ENDSPEECH: \"ask\"}}\r\n        \r\n                    }\r\n            },\r\n            day: {\r\n                initial: \"prompt\",\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"day\" in (grammar[context.recResult] || {}),\r\n                        actions: assign((context) => {return{ day: grammar[context.recResult].day}}),\r\n                        target: \"length\"\r\n                    },\r\n                    {target: \".nomatch\"}]\r\n                },\r\n                states: {\r\n                    prompt: {\r\n                        entry: send((context) => ({\r\n                            type: \"SPEAK\",\r\n                            value: `OK. ${context.person}. On which day is your meeting?`})),\r\n                        on: {ENDSPEECH: \"ask\"}\r\n                        },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    nomatch: {\r\n                        entry: say(\"Sorry, I don't understand. Please repeat\"),\r\n                        on: {ENDSPEECH: \"ask\"}\r\n                    }\r\n                }\r\n            },\r\n            length: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"whole_day\"},\r\n\r\n                        {cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"time\"},\r\n\r\n                        {cond: (context) => \"uncertain\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \".specific\"},\r\n\r\n                    {target:\".nomatch\"}]\r\n\r\n                    },\r\n                states: {\r\n                    prompt: {\r\n                        entry: say(\"Will it take the whole day?\"),\r\n                        on: {ENDSPEECH: \"ask\"}\r\n                    },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    nomatch: {\r\n                        entry: say(\"Sorry, I did not understand you this time.\"),\r\n                    on: {ENDSPEECH: \"ask\"}\r\n                    },\r\n                    specific: {\r\n                        entry: say(\"please be more specific.\"),\r\n                    on: {ENDSPEECH: \"ask\"},\r\n                    }\r\n                }\r\n            },\r\n            time: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"time\" in (grammar[context.recResult] || {}),\r\n                        actions: assign((context) => {return{ time: grammar[context.recResult].time}}),\r\n                        target: \"repetition\"\r\n                        },\r\n                    {\r\n                    target: \".nomatch\"\r\n                    }]\r\n                },\r\n                states: {\r\n                    prompt: {\r\n                        entry: say(\"What time is your meeting?\"),\r\n                        on: {ENDSPEECH: \"ask\"}\r\n                    },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    nomatch: {\r\n                        entry: say(\"Sorry, I don't understand. Please repeat\"),\r\n                        on: {ENDSPEECH: \"ask\"}}\r\n                    }\r\n            },\r\n            whole_day: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"confirmation\"},\r\n                        {\r\n                        cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \".canceled\"},\r\n\r\n                    {target: \".nomatch\"}]\r\n                },\r\n                states:{\r\n                    prompt:{\r\n                        entry: send((context) => ({\r\n                            type: \"SPEAK\",\r\n                            value:`Do you want me to create an appointment with ${context.person} on ${context.day} for the whole day?`})),\r\n                        on: {ENDSPEECH: \"ask\"}\r\n\r\n                    },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    canceled: {\r\n                        entry: say(\"The appointment has been canceled.\"),\r\n                        on: {ENDSPEECH: '#make_a_choice'}\r\n\r\n                    },\r\n                    nomatch: {\r\n                        entry: say(\"Sorry, I don't understand. Please repeat\"),\r\n                        on: {ENDSPEECH: \"ask\"}}\r\n                }\r\n            },\r\n            repetition: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"confirmation\"},\r\n                        {\r\n                        cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \".canceled\"},\r\n                        {cond: (context) => \"unsure\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \".specific\"},\r\n                    {target: \".nomatch\"}]\r\n                },\r\n                states:{\r\n                    prompt:{\r\n                        entry: send((context) => ({\r\n                            type: \"SPEAK\",\r\n                            value:`Do you want me to create an appointment with ${context.person} on ${context.day} at ${context.time}?`})),\r\n                            on: {ENDSPEECH: \"ask\"}\r\n                    },\r\n                    canceled: {\r\n                        entry: say(\"The appointment has been cancell\\ed.\"),\r\n                        on: {ENDSPEECH: '#make_a_choice'}\r\n                    },\r\n                    ask: {\r\n                        entry: listen()\r\n                    },\r\n                    specific:{\r\n                        entry: say(\"Please be more specific.\"),\r\n                        on: {ENDSPEECH: 'ask'}\r\n                    },\r\n                    nomatch: {\r\n                        entry: say(\"Sorry, I don't understand. Please repeat\"),\r\n                        on: {ENDSPEECH: \"ask\"}}}\r\n            },\r\n            confirmation: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                     RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"to_do_item\"},\r\n                        {\r\n                        cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \"#make_a_choice\"},\r\n                        {\r\n                        cond: (context) => \"unsure\" in (boolean_grammar[context.recResult] || {}),\r\n                        target: \".specific\"},\r\n\r\n                    {target: \".nomatch\"}]\r\n                },\r\n                states: {\r\n                    prompt: {\r\n                        entry: say(\"Your appointment has been created! Would you like to add it to your to do list? \"),\r\n                        on: {ENDSPEECH: 'ask'}\r\n                    },\r\n                    ask: {entry: listen(),\r\n                    },\r\n                    nomatch:{\r\n                        entry: say(\"Sorry, I did not get you.\")\r\n                    },\r\n                    specific:{\r\n                        entry: say(\"Please be more specific\"),\r\n                        on: {ENDSPEECH: 'ask'}\r\n                    }\r\n                }\r\n            },\r\n        }\r\n})"]},"metadata":{},"sourceType":"module"}